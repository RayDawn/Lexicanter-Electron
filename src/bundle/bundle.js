var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function i(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function s(e){let t;return l(e,(e=>t=e))(),t}function a(e,t,n){e.$$.on_destroy.push(l(t,n))}function c(e,t,n){return e.set(n),t}function d(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function g(e){return document.createTextNode(e)}function w(){return g(" ")}function y(){return g("")}function v(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function b(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e){return""===e?null:+e}function _(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function k(e,t){e.value=null==t?"":t}function C(e,t,n,o){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function $(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}e.selectedIndex=-1}function T(e,t,n){e.classList[n?"add":"remove"](t)}function S(e,t){return new e(t)}let L;function E(e){L=e}function P(){const e=function(){if(!L)throw new Error("Function called outside component initialization");return L}();return(t,n,{cancelable:o=!1}={})=>{const i=e.$$.callbacks[t];if(i){const r=function(e,t,{bubbles:n=!1,cancelable:o=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,o,t),i}(t,n,{cancelable:o});return i.slice().forEach((t=>{t.call(e,r)})),!r.defaultPrevented}return!0}}const M=[],O=[],N=[],j=[],F=Promise.resolve();let A=!1;function H(e){N.push(e)}function q(e){j.push(e)}const D=new Set;let I=0;function B(){if(0!==I)return;const e=L;do{try{for(;I<M.length;){const e=M[I];I++,E(e),z(e.$$)}}catch(e){throw M.length=0,I=0,e}for(E(null),M.length=0,I=0;O.length;)O.pop()();for(let e=0;e<N.length;e+=1){const t=N[e];D.has(t)||(D.add(t),t())}N.length=0}while(M.length);for(;j.length;)j.pop()();A=!1,D.clear(),E(e)}function z(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(H)}}const V=new Set;let W;function R(){W={r:0,c:[],p:W}}function J(){W.r||o(W.c),W=W.p}function G(e,t){e&&e.i&&(V.delete(e),e.i(t))}function Y(e,t,n,o){if(e&&e.o){if(V.has(e))return;V.add(e),W.c.push((()=>{V.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function U(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function K(e){e&&e.c()}function X(e,n,r,l){const{fragment:s,after_update:a}=e.$$;s&&s.m(n,r),l||H((()=>{const n=e.$$.on_mount.map(t).filter(i);e.$$.on_destroy?e.$$.on_destroy.push(...n):o(n),e.$$.on_mount=[]})),a.forEach(H)}function Q(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(e,t){-1===e.$$.dirty[0]&&(M.push(e),A||(A=!0,F.then(B)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ee(t,i,r,l,s,a,c,d=[-1]){const u=L;E(t);const p=t.$$={fragment:null,ctx:[],props:a,update:e,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(u?u.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:i.target||u.$$.root};c&&c(p.root);let f=!1;if(p.ctx=r?r(t,i.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return p.ctx&&s(p.ctx[e],p.ctx[e]=i)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](i),f&&Z(t,e)),n})):[],p.update(),f=!0,o(p.before_update),p.fragment=!!l&&l(p.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);p.fragment&&p.fragment.l(e),e.forEach(h)}else p.fragment&&p.fragment.c();i.intro&&G(t.$$.fragment),X(t,i.target,i.anchor,i.customElement),B()}E(u)}class te{$destroy(){Q(this,1),this.$destroy=e}$on(t,n){if(!i(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ne=[];function oe(t,n=e){let o;const i=new Set;function l(e){if(r(t,e)&&(t=e,o)){const e=!ne.length;for(const e of i)e[1](),ne.push(e,t);if(e){for(let e=0;e<ne.length;e+=2)ne[e][0](ne[e+1]);ne.length=0}}}return{set:l,update:function(e){l(e(t))},subscribe:function(r,s=e){const a=[r,s];return i.add(a),1===i.size&&(o=n(l)||e),r(t),()=>{i.delete(a),0===i.size&&(o(),o=null)}}}}let ie=oe("Unnamed Language"),re=oe(!1),le=oe(!0),se=oe(""),ae=oe({}),ce=oe("a b c d e f g h i j k l m n o p q r s t u v w x y z"),de=oe(""),ue=oe(""),he=oe({}),pe=oe(""),fe=oe(""),me=oe(""),ge=oe(""),we=oe(""),ye=oe([]),ve=oe({th:"θ"}),be=oe("th > θ"),xe=oe(""),_e=oe(""),ke=oe(""),Ce=oe(""),$e=oe(""),Te=oe(),Se=oe("styles/dark.css"),Le=oe(!0);function Ee(e){let t=s(ve),n=s(re);e=`^${e.replaceAll(/[^\S\n]|(\n)/gm,"^$1")}^`,e=n?e:e.toLowerCase();let o=[];for(let e in t)o.push(e.length);o=Array.from(new Set(o)).sort(((e,t)=>t-e));let i={};for(let e of o){e in i||(i[e]={});for(let n in t)n.length===e&&(i[e][n]=t[n])}for(let t=0;t<e.length;t++)for(let n of o){let o=e.slice(t,t+n),r=!1;if(Object.keys(i[n]).forEach((e=>{let t=[...e].map(((e,t)=>"_"===e&&"^"!==o[t]?o[t]:e)).join("");t===o&&(r=[...i[n][e]].map(((e,t)=>"_"===e&&"^"!==o[t]?o[t]:e)).join(""))})),o in i[n]||r){let l=r||i[n][o];e=e.slice(0,t)+l+e.slice(n+t),t+=l.length-1;break}}return e.replaceAll("^"," ").trim().replaceAll("∅","")}function Pe(){let e={},t={},n=[];s(be).split("\n").forEach((e=>{let o=e.trim().replace(/\s+/g,"");if(o.includes("::")){let[e,n]=o.split("::"),i=n.split(",");t[e]=i}o.includes(">")&&n.push(o)}));let o=function(e,t){let n=[];for(let o of e){let[e,i]=o.split(">");e=e.split(""),i=i.split("");let r=[...new Set(e.filter((e=>e in t)))],l=r.reduce(((e,n)=>{let o=[];for(let i of e)for(let e of t[n])o.push(i.concat(e));return o}),[[]]);for(let o of l){let l=[...e],s=[...i];for(let e=0;e<r.length;e++)l=l.map((t=>t===r[e]?o[e]:t));s=s.map(((n,i)=>r.includes(n)?o[r.indexOf(n)]:n in t?t[n][t[[...e][i]].indexOf(l[i])]:n));let a=`${l.join("")}>${s.join("")}`;n.push(a)}}return n}(n,t);o.forEach((t=>{let[n,o]=t.split(">");e[n]=o})),ue.set(Ee(s(de)));let i=s(ae);for(let e in i)!1===i[e][2]&&(i[e][0]=Ee(e));ae.set(i),fe.set(Ee(s(pe)));let r=s(he);for(let e in he)for(let t in he[e]){he[e][t].pronunciation=Ee(t);for(let n in he[e][t].variants)he[e][t].variants[n].pronunciation=Ee(n)}he.set(r),ve.set(e)}function Me(e,t,n){const o=e.slice();return o[4]=t[n],o}function Oe(e){let t,n,o=e[4]+"";return{c(){t=m("div"),n=g(o),b(t,"class","tag-item")},m(e,o){u(e,t,o),d(t,n)},p(e,t){3&t&&o!==(o=e[4]+"")&&_(n,o)},d(e){e&&h(t)}}}function Ne(t){let n,o,i,r,l,s,a,c,f,y,x,k,$=t[1][t[0]][0]+"",T=t[1][t[0]][1]+"",S=t[1][t[0]][3],L=[];for(let e=0;e<S.length;e+=1)L[e]=Oe(Me(t,S,e));return{c(){n=m("div"),o=m("p"),i=g(t[0]),r=w(),l=m("p"),s=g($),a=w();for(let e=0;e<L.length;e+=1)L[e].c();c=w(),f=m("p"),y=g(T),C(o,"font-style","italic"),b(l,"class","pronunciation"),b(n,"id",t[0]),b(n,"class","lex-entry prelined")},m(e,h){u(e,n,h),d(n,o),d(o,i),d(n,r),d(n,l),d(l,s),d(n,a);for(let e=0;e<L.length;e+=1)L[e].m(n,null);d(n,c),d(n,f),d(f,y),x||(k=v(n,"contextmenu",t[2]),x=!0)},p(e,[t]){if(1&t&&_(i,e[0]),3&t&&$!==($=e[1][e[0]][0]+"")&&_(s,$),3&t){let o;for(S=e[1][e[0]][3],o=0;o<S.length;o+=1){const i=Me(e,S,o);L[o]?L[o].p(i,t):(L[o]=Oe(i),L[o].c(),L[o].m(n,c))}for(;o<L.length;o+=1)L[o].d(1);L.length=S.length}3&t&&T!==(T=e[1][e[0]][1]+"")&&_(y,T),1&t&&b(n,"id",e[0])},i:e,o:e,d(e){e&&h(n),p(L,e),x=!1,k()}}}function je(e,t,n){let o;a(e,ae,(e=>n(1,o=e)));const i=P();let{entry:r=""}=t;return e.$$set=e=>{"entry"in e&&n(0,r=e.entry)},[r,o,()=>i("edit")]}class Fe extends te{constructor(e){super(),ee(this,e,je,Ne,r,{entry:0})}}function Ae(e,t,n){const o=e.slice();return o[34]=t[n],o}function He(t){let n,i,r,l,s,a;return{c(){n=m("div"),i=m("button"),i.textContent="Overwrite Entry",r=w(),l=m("button"),l.textContent="Append Definition",b(i,"id","overwrite"),b(i,"class","hover-shadow"),b(l,"id","append"),b(l,"class","hover-shadow hover-highlight"),b(n,"class","row"),b(n,"id","definition-exists")},m(e,o){u(e,n,o),d(n,i),d(n,r),d(n,l),s||(a=[v(i,"click",t[28]),v(l,"click",t[29])],s=!0)},p:e,d(e){e&&h(n),s=!1,o(a)}}}function qe(t){let n,o,i;return{c(){n=m("button"),n.textContent="Add Word",b(n,"class","hover-highlight hover-shadow"),b(n,"id","add-word-button")},m(e,r){u(e,n,r),o||(i=v(n,"click",t[27]),o=!0)},p:e,d(e){e&&h(n),o=!1,i()}}}function De(e){let t;return{c(){t=m("label"),t.textContent="Search by word…",b(t,"for","search-wrd"),C(t,"position","absolute"),C(t,"top","0.5em"),C(t,"left","1em")},m(e,n){u(e,t,n)},d(e){e&&h(t)}}}function Ie(e){let t;return{c(){t=m("label"),t.textContent="Search by tags…",b(t,"for","search-tag"),C(t,"position","absolute"),C(t,"top","0.5em"),C(t,"left","1em")},m(e,n){u(e,t,n)},d(e){e&&h(t)}}}function Be(e){let t;return{c(){t=m("label"),t.textContent="Search definitions…",b(t,"for","search-def"),C(t,"position","absolute"),C(t,"top","0.33em"),C(t,"left","1em")},m(e,n){u(e,t,n)},d(e){e&&h(t)}}}function ze(t){let n;return{c(){n=m("p"),n.textContent="Add new words on the left",b(n,"class","info"),b(n,"id","lex-body")},m(e,t){u(e,n,t)},p:e,d(e){e&&h(n)}}}function Ve(e){let t,n;return t=new Fe({props:{entry:e[34]}}),t.$on("edit",(function(){return e[33](e[34])})),{c(){K(t.$$.fragment)},m(e,o){X(t,e,o),n=!0},p(n,o){e=n;const i={};256&o[0]&&(i.entry=e[34]),t.$set(i)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){Y(t.$$.fragment,e),n=!1},d(e){Q(t,e)}}}function We(e){let t,n,o,i=Object.keys(e[1]).length+"",r=1===Object.keys(e[1]).length?"Entry":"Entries";return{c(){t=g(i),n=w(),o=g(r)},m(e,i){u(e,t,i),u(e,n,i),u(e,o,i)},p(e,n){2&n[0]&&i!==(i=Object.keys(e[1]).length+"")&&_(t,i),2&n[0]&&r!==(r=1===Object.keys(e[1]).length?"Entry":"Entries")&&_(o,r)},d(e){e&&h(t),e&&h(n),e&&h(o)}}}function Re(e){let t,n,o,i=(e[0][0]?e[0].length:"0")+"",r=1===e[0].length&&e[0][0]?"Match":"Matches";return{c(){t=g(i),n=w(),o=g(r)},m(e,i){u(e,t,i),u(e,n,i),u(e,o,i)},p(e,n){1&n[0]&&i!==(i=(e[0][0]?e[0].length:"0")+"")&&_(t,i),1&n[0]&&r!==(r=1===e[0].length&&e[0][0]?"Match":"Matches")&&_(o,r)},d(e){e&&h(t),e&&h(n),e&&h(o)}}}function Je(e){let t,n,i,r,l,s,a,c,f,g,y,x,_,$,S,L,E,P,M,O,N,j,F,A,H,q,D,I,B,z,V,W,U,K,X,Q,Z,ee,te,ne,oe,ie,re,le,se,ae,ce,de,ue,he,pe,fe,me,ge,we,ye,ve,be,xe,_e,ke,Ce;function $e(e,t){return e[12]in e[1]?He:qe}let Te=$e(e),Se=Te(e),Le=!e[5]&&De(),Ee=!e[7]&&Ie(),Pe=!e[6]&&Be(),Me=e[8],Oe=[];for(let t=0;t<Me.length;t+=1)Oe[t]=Ve(Ae(e,Me,t));const Ne=e=>Y(Oe[e],1,1,(()=>{Oe[e]=null}));let je=null;function Fe(e,t){return e[0]?Re:We}Me.length||(je=ze());let Je=Fe(e),Ge=Je(e);return{c(){t=m("div"),n=m("div"),i=m("div"),r=m("label"),r.textContent="Case Sensitivity",l=w(),s=m("input"),a=w(),c=m("div"),f=m("label"),f.textContent="Ignore Diacritics",g=w(),y=m("input"),x=w(),_=m("input"),$=w(),S=m("div"),L=m("div"),E=m("button"),P=w(),M=m("div"),O=m("label"),O.textContent="New Word",N=w(),j=m("input"),F=w(),A=m("input"),H=w(),q=m("br"),D=w(),I=m("label"),I.textContent="Definition",B=w(),z=m("textarea"),V=w(),W=m("br"),U=w(),K=m("label"),K.textContent="Tags",X=w(),Q=m("textarea"),Z=w(),ee=m("br"),te=w(),Se.c(),ne=w(),oe=m("div"),ie=w(),re=m("div"),le=m("div"),se=m("div"),Le&&Le.c(),ae=w(),ce=m("input"),de=w(),ue=m("div"),Ee&&Ee.c(),he=w(),pe=m("input"),fe=w(),me=m("div"),Pe&&Pe.c(),ge=w(),we=m("input"),ye=w(),ve=m("div");for(let e=0;e<Oe.length;e+=1)Oe[e].c();je&&je.c(),be=w(),xe=m("p"),Ge.c(),b(r,"for","case-sensitive"),C(r,"margin","auto"),b(s,"type","checkbox"),C(s,"width","15px"),C(s,"margin","auto"),b(s,"id","case-sensitive"),b(i,"class","narrow-col"),b(f,"for","ignore-diacritic"),C(f,"margin","auto"),C(f,"text-align","right"),b(y,"type","checkbox"),C(y,"width","15px"),C(y,"margin","auto"),b(y,"id","ignore-diacritic"),b(c,"class","narrow-col"),b(_,"id","alph-input"),b(_,"type","text"),b(n,"class","container row text-center header"),b(E,"class","collapser"),b(O,"for","wrd-input"),b(j,"id","wrd-input"),b(j,"type","text"),b(A,"id","pronunciation"),b(A,"class","pronunciation"),b(A,"type","text"),b(I,"for","def-input"),b(z,"name","Definition"),b(z,"id","def-input"),b(z,"rows","16"),b(K,"for","tags"),b(Q,"id","tags"),b(Q,"rows","1"),C(oe,"width","100vw"),b(M,"class","text-center scrolled"),C(M,"height","100%"),C(M,"overflow-x","hidden"),T(M,"collapsed",e[9]),b(L,"class","container collapsible-column"),C(L,"height","100%"),b(ce,"id","search-wrd"),b(ce,"type","text"),b(ce,"class","search"),b(se,"class","column search-container"),b(pe,"id","search-tag"),b(pe,"type","text"),b(pe,"class","search"),b(ue,"class","column search-container"),b(le,"class","row"),b(we,"id","search-def"),b(we,"type","text"),b(we,"class","search"),b(me,"class","search-container"),b(ve,"class","scrolled"),C(ve,"height","88%"),b(xe,"id","entry-counter"),b(re,"class","container column text-center"),C(re,"height","100%"),b(S,"class","row"),C(S,"height","84vh"),b(t,"class","tab-pane")},m(o,h){u(o,t,h),d(t,n),d(n,i),d(i,r),d(i,l),d(i,s),s.checked=e[10],d(n,a),d(n,c),d(c,f),d(c,g),d(c,y),y.checked=e[13],d(n,x),d(n,_),k(_,e[2]),d(t,$),d(t,S),d(S,L),d(L,E),d(L,P),d(L,M),d(M,O),d(M,N),d(M,j),k(j,e[12]),d(M,F),d(M,A),k(A,e[11]),d(M,H),d(M,q),d(M,D),d(M,I),d(M,B),d(M,z),k(z,e[3]),d(M,V),d(M,W),d(M,U),d(M,K),d(M,X),d(M,Q),k(Q,e[4]),d(M,Z),d(M,ee),d(M,te),Se.m(M,null),d(M,ne),d(M,oe),d(S,ie),d(S,re),d(re,le),d(le,se),Le&&Le.m(se,null),d(se,ae),d(se,ce),k(ce,e[5]),d(le,de),d(le,ue),Ee&&Ee.m(ue,null),d(ue,he),d(ue,pe),k(pe,e[7]),d(re,fe),d(re,me),Pe&&Pe.m(me,null),d(me,ge),d(me,we),k(we,e[6]),d(re,ye),d(re,ve);for(let e=0;e<Oe.length;e+=1)Oe[e].m(ve,null);je&&je.m(ve,null),d(re,be),d(re,xe),Ge.m(xe,null),_e=!0,ke||(Ce=[v(s,"change",e[18]),v(y,"change",e[19]),v(_,"input",e[20]),v(E,"click",e[21]),v(j,"input",e[22]),v(j,"input",e[23]),v(A,"input",e[24]),v(z,"input",e[25]),v(Q,"input",e[26]),v(ce,"input",e[30]),v(ce,"input",e[16]),v(pe,"input",e[31]),v(pe,"input",e[16]),v(we,"input",e[32]),v(we,"input",e[16])],ke=!0)},p(e,t){if(1024&t[0]&&(s.checked=e[10]),8192&t[0]&&(y.checked=e[13]),4&t[0]&&_.value!==e[2]&&k(_,e[2]),4096&t[0]&&j.value!==e[12]&&k(j,e[12]),2048&t[0]&&A.value!==e[11]&&k(A,e[11]),8&t[0]&&k(z,e[3]),16&t[0]&&k(Q,e[4]),Te===(Te=$e(e))&&Se?Se.p(e,t):(Se.d(1),Se=Te(e),Se&&(Se.c(),Se.m(M,ne))),(!_e||512&t[0])&&T(M,"collapsed",e[9]),e[5]?Le&&(Le.d(1),Le=null):Le||(Le=De(),Le.c(),Le.m(se,ae)),32&t[0]&&ce.value!==e[5]&&k(ce,e[5]),e[7]?Ee&&(Ee.d(1),Ee=null):Ee||(Ee=Ie(),Ee.c(),Ee.m(ue,he)),128&t[0]&&pe.value!==e[7]&&k(pe,e[7]),e[6]?Pe&&(Pe.d(1),Pe=null):Pe||(Pe=Be(),Pe.c(),Pe.m(me,ge)),64&t[0]&&we.value!==e[6]&&k(we,e[6]),16640&t[0]){let n;for(Me=e[8],n=0;n<Me.length;n+=1){const o=Ae(e,Me,n);Oe[n]?(Oe[n].p(o,t),G(Oe[n],1)):(Oe[n]=Ve(o),Oe[n].c(),G(Oe[n],1),Oe[n].m(ve,null))}for(R(),n=Me.length;n<Oe.length;n+=1)Ne(n);J(),!Me.length&&je?je.p(e,t):Me.length?je&&(je.d(1),je=null):(je=ze(),je.c(),je.m(ve,null))}Je===(Je=Fe(e))&&Ge?Ge.p(e,t):(Ge.d(1),Ge=Je(e),Ge&&(Ge.c(),Ge.m(xe,null)))},i(e){if(!_e){for(let e=0;e<Me.length;e+=1)G(Oe[e]);_e=!0}},o(e){Oe=Oe.filter(Boolean);for(let e=0;e<Oe.length;e+=1)Y(Oe[e]);_e=!1},d(e){e&&h(t),Se.d(),Le&&Le.d(),Ee&&Ee.d(),Pe&&Pe.d(),p(Oe,e),je&&je.d(),Ge.d(),ke=!1,o(Ce)}}}function Ge(e,t,n){let o,i,r,l,d,u,h,p,f;a(e,ae,(e=>n(1,l=e))),a(e,re,(e=>n(10,d=e))),a(e,ue,(e=>n(11,u=e))),a(e,de,(e=>n(12,h=e))),a(e,ce,(e=>n(2,p=e))),a(e,le,(e=>n(13,f=e)));let m,g="",w="",y="",v="",b="";function x(e){let t=!0;(h||g)&&(t=confirm("There is text in the word entry fields. Are you sure you want to overwrite it?")),t&&(c(de,h=e,h),c(ue,u=l[e][0],u),n(3,g=l[e][1]),n(4,w=l[e][3].join(" ")),delete l[e],c(ae,l=Object.assign({},l),l),console.log(l))}function _(e){let t=h.trim();if(!t)return;let o=g.trim();if(!o)return;let i,r=u.trim();return i=w?w.trim().split(/\s+/g):[],e?(c(ae,l[t][1]+="\n"+o,l),l[t][3].push(...i)):c(ae,l[t]=[r,o,r!==Ee(t),i],l),c(ae,l=Object.assign({},l),l),c(de,h="",h),c(ue,u="",u),n(3,g=""),n(4,w=""),t}return e.$$.update=()=>{3&e.$$.dirty[0]&&n(17,i=o.reduce(((e,t)=>(t in l&&(e[t]=l[t]),e)),{})),131079&e.$$.dirty[0]&&n(8,m=function(e){let t=s(se).toLowerCase().trim().split(/\s+/),n=s(ce),o=s(le),i=s(re),r=structuredClone(e),l=[];for(let n of t){l.push([]);for(let t in r)e[t][3].includes(n)&&l[l.length-1].push(t);for(let e of l[l.length-1])delete r[e]}let a=[];for(let e in r)a.push(e);l.push(a),n=i?n.trim():n.trim().toLowerCase();let c=n.split(/\s+/),d=Array.from(new Set(c)).sort(((e,t)=>t.length-e.length)),u=[];for(let e of l){let t={},n=[];for(let r of e){let e=i?r:r.toLowerCase();e=o?e.normalize("NFD").replace(/\p{Diacritic}/gu,""):e;for(let t of d)e=e.replace(new RegExp(`${t}`,"g"),`${c.indexOf(t)}.`);let l=e.split(".");for(let e of l)l[l.indexOf(e)]=+e||0;t[r]=l,n.push(l)}n.sort(((e,t)=>{for(let n of e){let o=t[e.indexOf(n)];if(n!==o)return n-o}return 0}));let r=[];for(let e in t)r.push([e,n.indexOf(t[e])]);r.sort(((e,t)=>e[1]-t[1]));for(let e=0;e<r.length;e++)r[e]=r[e][0];for(let e of r)u.push(e)}return u}(o.length?i:l))},n(0,o=[]),n(9,r=!1),[o,l,p,g,w,y,v,b,m,r,d,u,h,f,x,_,function(){let e=d?y.trim():y.toLowerCase().trim(),t=v.toLowerCase().trim(),i=b.toLowerCase().trim()?b.toLowerCase().trim().split(/\s+/g):[];if(n(0,o=[]),e||t||i){let r=[[...e.split("|")],[...t.split("|")]];for(let e in l){let t=`^${e}^`,s=!0;for(let e of r[0])t.includes(e)||(s=!1);for(let t of r[1]){if("!"===t[0]){new RegExp(`\\b${t.split("!")[1]}\\b`,"i").test(l[e][1].toLowerCase())||(s=!1)}else l[e][1].toLowerCase().includes(t)||(s=!1)}if(l[e][3]){let t=!1,n=!1,o=!1;for(let r of l[e][3])for(let e of i)"!"===e[0]&&(n=!0,`!${r}`===e&&(o=!0,t=!0)),`^${r}^`.includes(e)&&(t=!0);(!t&&i||n&&!o)&&(s=!1)}else i&&(s=!1);s&&n(0,o=[...o,e])}o.length||n(0,o=[null])}},i,function(){d=this.checked,re.set(d)},function(){f=this.checked,le.set(f)},function(){p=this.value,ce.set(p)},()=>n(9,r=!r),function(){h=this.value,de.set(h)},()=>c(ue,u=Ee(h),u),function(){u=this.value,ue.set(u)},function(){g=this.value,n(3,g)},function(){w=this.value,n(4,w)},()=>_(!1),()=>_(!1),()=>_(!0),function(){y=this.value,n(5,y)},function(){b=this.value,n(7,b)},function(){v=this.value,n(6,v)},e=>x(e)]}class Ye extends te{constructor(e){super(),ee(this,e,Ge,Je,r,{},null,[-1,-1])}}function Ue(e,t,n){const o=e.slice();return o[5]=t[n],o[7]=n,o}function Ke(e,t,n){const o=e.slice();return o[8]=t[n],o}function Xe(e){let t,n,o,i=Array(Math.ceil(Object.keys(e[1][e[2]][e[0]].variants).length/3)),r=[];for(let t=0;t<i.length;t+=1)r[t]=Ze(Ue(e,i,t));return{c(){t=m("p"),t.textContent="⋲ ᴠᴀʀɪᴀɴᴛꜱ ⋺",n=w();for(let e=0;e<r.length;e+=1)r[e].c();o=y()},m(e,i){u(e,t,i),u(e,n,i);for(let t=0;t<r.length;t+=1)r[t].m(e,i);u(e,o,i)},p(e,t){if(7&t){let n;for(i=Array(Math.ceil(Object.keys(e[1][e[2]][e[0]].variants).length/3)),n=0;n<i.length;n+=1){const l=Ue(e,i,n);r[n]?r[n].p(l,t):(r[n]=Ze(l),r[n].c(),r[n].m(o.parentNode,o))}for(;n<r.length;n+=1)r[n].d(1);r.length=i.length}},d(e){e&&h(t),e&&h(n),p(r,e),e&&h(o)}}}function Qe(e){let t,n,o,i,r,l,s,a,c,p=e[8]+"",f=e[1][e[2]][e[0]].variants[e[8]].pronunciation+"",y=e[1][e[2]][e[0]].variants[e[8]].description+"";return{c(){t=m("div"),n=m("p"),o=g(p),i=w(),r=m("p"),l=g(f),s=w(),a=m("p"),c=g(y),C(n,"font-style","italic"),b(r,"class","pronunciation"),b(a,"class","prelined"),b(t,"class","column")},m(e,h){u(e,t,h),d(t,n),d(n,o),d(t,i),d(t,r),d(r,l),d(t,s),d(t,a),d(a,c)},p(e,t){7&t&&p!==(p=e[8]+"")&&_(o,p),7&t&&f!==(f=e[1][e[2]][e[0]].variants[e[8]].pronunciation+"")&&_(l,f),7&t&&y!==(y=e[1][e[2]][e[0]].variants[e[8]].description+"")&&_(c,y)},d(e){e&&h(t)}}}function Ze(e){let t,n,o=Object.keys(e[1][e[2]][e[0]].variants).slice(3*e[7],3*e[7]+3),i=[];for(let t=0;t<o.length;t+=1)i[t]=Qe(Ke(e,o,t));return{c(){t=m("div");for(let e=0;e<i.length;e+=1)i[e].c();n=w(),b(t,"class","row")},m(e,o){u(e,t,o);for(let e=0;e<i.length;e+=1)i[e].m(t,null);d(t,n)},p(e,r){if(7&r){let l;for(o=Object.keys(e[1][e[2]][e[0]].variants).slice(3*e[7],3*e[7]+3),l=0;l<o.length;l+=1){const s=Ke(e,o,l);i[l]?i[l].p(s,r):(i[l]=Qe(s),i[l].c(),i[l].m(t,n))}for(;l<i.length;l+=1)i[l].d(1);i.length=o.length}},d(e){e&&h(t),p(i,e)}}}function et(t){let n,o,i,r,l,s,a,c,p,f,y,x,k=t[1][t[2]][t[0]].pronunciation+"",$=t[1][t[2]][t[0]].description+"",T=!!Object.keys(t[1][t[2]][t[0]].variants).length,S=T&&Xe(t);return{c(){n=m("div"),o=m("p"),i=g(t[0]),r=w(),l=m("p"),s=g(k),a=w(),c=m("p"),p=g($),f=w(),S&&S.c(),C(o,"font-style","italic"),b(l,"class","pronunciation"),b(c,"class","prelined"),b(n,"class","lex-entry"),b(n,"id",t[0])},m(e,h){u(e,n,h),d(n,o),d(o,i),d(n,r),d(n,l),d(l,s),d(n,a),d(n,c),d(c,p),d(n,f),S&&S.m(n,null),y||(x=v(n,"contextmenu",t[3]),y=!0)},p(e,[t]){1&t&&_(i,e[0]),7&t&&k!==(k=e[1][e[2]][e[0]].pronunciation+"")&&_(s,k),7&t&&$!==($=e[1][e[2]][e[0]].description+"")&&_(p,$),7&t&&(T=!!Object.keys(e[1][e[2]][e[0]].variants).length),T?S?S.p(e,t):(S=Xe(e),S.c(),S.m(n,null)):S&&(S.d(1),S=null),1&t&&b(n,"id",e[0])},i:e,o:e,d(e){e&&h(n),S&&S.d(),y=!1,x()}}}function tt(e,t,n){let o,i;a(e,he,(e=>n(1,o=e))),a(e,we,(e=>n(2,i=e)));const r=P();let{phrase:l=""}=t;return e.$$set=e=>{"phrase"in e&&n(0,l=e.phrase)},[l,o,i,()=>r("edit")]}class nt extends te{constructor(e){super(),ee(this,e,tt,et,r,{phrase:0})}}function ot(t){let n,i,r,l,s,a,c,p,f,g;return{c(){n=m("div"),i=m("input"),r=w(),l=m("input"),s=w(),a=m("textarea"),c=w(),p=m("br"),b(i,"type","text"),b(l,"type","text"),b(l,"class","pronunciation"),b(n,"class","variant-div")},m(e,o){u(e,n,o),d(n,i),k(i,t[0]),d(n,r),d(n,l),k(l,t[1]),d(n,s),d(n,a),k(a,t[2]),d(n,c),d(n,p),f||(g=[v(i,"keyup",t[3]),v(i,"input",t[4]),v(l,"input",t[5]),v(a,"input",t[6])],f=!0)},p(e,[t]){1&t&&i.value!==e[0]&&k(i,e[0]),2&t&&l.value!==e[1]&&k(l,e[1]),4&t&&k(a,e[2])},i:e,o:e,d(e){e&&h(n),f=!1,o(g)}}}function it(e,t,n){let{phrase:o=""}=t,{pronunciation:i=""}=t,{description:r=""}=t;const l=P();return e.$$set=e=>{"phrase"in e&&n(0,o=e.phrase),"pronunciation"in e&&n(1,i=e.pronunciation),"description"in e&&n(2,r=e.description)},[o,i,r,()=>l("update"),function(){o=this.value,n(0,o)},function(){i=this.value,n(1,i)},function(){r=this.value,n(2,r)}]}class rt extends te{constructor(e){super(),ee(this,e,it,ot,r,{phrase:0,pronunciation:1,description:2})}}function lt(e,t,n){const o=e.slice();return o[30]=t[n],o[31]=t,o[32]=n,o}function st(e,t,n){const o=e.slice();return o[33]=t[n],o}function at(e,t,n){const o=e.slice();return o[36]=t[n],o}function ct(t){let n;return{c(){n=m("p"),n.textContent="Categories will appear here.",b(n,"class","info")},m(e,t){u(e,n,t)},p:e,d(e){e&&h(n)}}}function dt(e){let t,n,o,i,r,l=e[36]+"";function s(){return e[15](e[36])}return{c(){t=m("div"),n=g(l),o=w(),b(t,"class","lex-entry capitalize"),T(t,"selected",e[36]===e[2])},m(e,l){u(e,t,l),d(t,n),d(t,o),i||(r=v(t,"mousedown",s),i=!0)},p(o,i){e=o,512&i[0]&&l!==(l=e[36]+"")&&_(n,l),516&i[0]&&T(t,"selected",e[36]===e[2])},d(e){e&&h(t),i=!1,r()}}}function ut(e){let t;return{c(){t=m("label"),t.textContent="Search by phrase…",b(t,"for","search-phrase"),C(t,"position","absolute"),C(t,"top",".5em"),C(t,"left","1em")},m(e,n){u(e,t,n)},d(e){e&&h(t)}}}function ht(e){let t;return{c(){t=m("label"),t.textContent="Search descriptions…",b(t,"for","search-description"),C(t,"position","absolute"),C(t,"top",".5em"),C(t,"left","1em")},m(e,n){u(e,t,n)},d(e){e&&h(t)}}}function pt(t){let n;return{c(){n=m("p"),n.textContent="Select a category from the left or add your first phrase entry.",b(n,"class","info")},m(e,t){u(e,n,t)},p:e,i:e,o:e,d(e){e&&h(n)}}}function ft(e){let t,n,o=e[3],i=[];for(let t=0;t<o.length;t+=1)i[t]=mt(st(e,o,t));const r=e=>Y(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=y()},m(e,o){for(let t=0;t<i.length;t+=1)i[t].m(e,o);u(e,t,o),n=!0},p(e,n){if(4104&n[0]){let l;for(o=e[3],l=0;l<o.length;l+=1){const r=st(e,o,l);i[l]?(i[l].p(r,n),G(i[l],1)):(i[l]=mt(r),i[l].c(),G(i[l],1),i[l].m(t.parentNode,t))}for(R(),l=o.length;l<i.length;l+=1)r(l);J()}},i(e){if(!n){for(let e=0;e<o.length;e+=1)G(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)Y(i[e]);n=!1},d(e){p(i,e),e&&h(t)}}}function mt(e){let t,n;return t=new nt({props:{phrase:e[33]}}),t.$on("edit",(function(){return e[18](e[33])})),{c(){K(t.$$.fragment)},m(e,o){X(t,e,o),n=!0},p(n,o){e=n;const i={};8&o[0]&&(i.phrase=e[33]),t.$set(i)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){Y(t.$$.fragment,e),n=!1},d(e){Q(t,e)}}}function gt(t){let n;return{c(){n=m("p"),n.textContent="Click the button below to add a variation for this phrase",b(n,"class","info")},m(e,t){u(e,n,t)},p:e,d(e){e&&h(n)}}}function wt(e){let t,n,o,i,r;function l(t){e[25](t,e[32])}function s(t){e[26](t,e[32])}function a(t){e[27](t,e[32])}let c={};return void 0!==e[5][e[32]].phrase&&(c.phrase=e[5][e[32]].phrase),void 0!==e[5][e[32]].pronunciation&&(c.pronunciation=e[5][e[32]].pronunciation),void 0!==e[5][e[32]].description&&(c.description=e[5][e[32]].description),t=new rt({props:c}),O.push((()=>U(t,"phrase",l))),O.push((()=>U(t,"pronunciation",s))),O.push((()=>U(t,"description",a))),t.$on("update",(function(){return e[28](e[32])})),{c(){K(t.$$.fragment)},m(e,n){X(t,e,n),r=!0},p(r,l){e=r;const s={};!n&&32&l[0]&&(n=!0,s.phrase=e[5][e[32]].phrase,q((()=>n=!1))),!o&&32&l[0]&&(o=!0,s.pronunciation=e[5][e[32]].pronunciation,q((()=>o=!1))),!i&&32&l[0]&&(i=!0,s.description=e[5][e[32]].description,q((()=>i=!1))),t.$set(s)},i(e){r||(G(t.$$.fragment,e),r=!0)},o(e){Y(t.$$.fragment,e),r=!1},d(e){Q(t,e)}}}function yt(e){let t,n,i,r,l,s,a,c,f,g,y,x,_,$,S,L,E,P,M,O,N,j,F,A,H,q,D,I,B,z,V,W,U,K,X,Q,Z,ee,te,ne,oe,ie,re,le,se,ae,ce,de,ue,he,pe,fe,me,ge,we=Object.keys(e[9]),ye=[];for(let t=0;t<we.length;t+=1)ye[t]=dt(at(e,we,t));let ve=null;we.length||(ve=ct());let be=!e[0]&&ut(),xe=!e[1]&&ht();const _e=[ft,pt],ke=[];function Ce(e,t){return 512&t[0]&&(N=null),null==N&&(N=!!Object.keys(e[9]).length),N?0:1}j=Ce(e,[-1,-1]),F=ke[j]=_e[j](e);let $e=e[5],Te=[];for(let t=0;t<$e.length;t+=1)Te[t]=wt(lt(e,$e,t));const Se=e=>Y(Te[e],1,1,(()=>{Te[e]=null}));let Le=null;return $e.length||(Le=gt()),{c(){t=m("div"),n=m("div"),i=m("div"),r=m("p"),r.textContent="Categories",l=w(),s=m("hr"),a=w(),c=m("div");for(let e=0;e<ye.length;e+=1)ye[e].c();ve&&ve.c(),f=w(),g=m("div"),y=m("div"),x=m("div"),be&&be.c(),_=w(),$=m("input"),S=w(),L=m("div"),xe&&xe.c(),E=w(),P=m("input"),M=w(),O=m("div"),F.c(),A=w(),H=m("div"),q=m("div"),D=m("button"),I=w(),B=m("div"),z=m("div"),V=m("label"),V.textContent="Phrase",W=w(),U=m("input"),K=w(),X=m("input"),Q=w(),Z=m("label"),Z.textContent="Description",ee=w(),te=m("textarea"),ne=w(),oe=m("br"),ie=w(),re=m("label"),re.textContent="Category",le=w(),se=m("input"),ae=w(),ce=m("button"),ce.textContent="Add Phrase",de=w(),ue=m("div");for(let e=0;e<Te.length;e+=1)Te[e].c();Le&&Le.c(),he=w(),pe=m("button"),pe.textContent="+ Variant",b(c,"class","column scrolled"),C(c,"max-height","90%"),b(c,"id","category-body"),b(i,"class","container column"),C(i,"max-width","18%"),b($,"id","search-phrase"),b($,"type","text"),b($,"class","search"),b(x,"class","column search-container"),b(P,"id","search-description"),b(P,"type","text"),b(P,"class","search"),b(L,"class","column search-container"),b(y,"class","row"),b(O,"class","column scrolled"),b(O,"id","phrasebook-body"),C(O,"max-height","90%"),b(g,"class","container column"),b(n,"class","row"),C(n,"height","58vh"),b(D,"class","collapser-h"),b(q,"class","row"),C(q,"width","100vh"),b(V,"for","phrase"),b(U,"type","text"),b(X,"type","text"),b(X,"class","pronunciation"),b(Z,"for","description"),b(te,"id","description"),b(re,"for","category"),b(se,"type","text"),b(ce,"class","hover-shadow hover-highlight"),b(z,"class","column scrolled"),C(z,"max-height","100%"),b(pe,"class","hover-shadow hover-highlight"),b(ue,"class","column scrolled"),C(ue,"max-height","100%"),b(ue,"id","variants-body"),b(B,"class","row"),C(B,"height","92%"),T(B,"collapsed",e[4]),b(H,"class","container collapsible-row"),C(H,"height","34vh"),b(t,"class","tab-pane")},m(o,h){u(o,t,h),d(t,n),d(n,i),d(i,r),d(i,l),d(i,s),d(i,a),d(i,c);for(let e=0;e<ye.length;e+=1)ye[e].m(c,null);ve&&ve.m(c,null),d(n,f),d(n,g),d(g,y),d(y,x),be&&be.m(x,null),d(x,_),d(x,$),k($,e[0]),d(y,S),d(y,L),xe&&xe.m(L,null),d(L,E),d(L,P),k(P,e[1]),d(g,M),d(g,O),ke[j].m(O,null),d(t,A),d(t,H),d(H,q),d(q,D),d(H,I),d(H,B),d(B,z),d(z,V),d(z,W),d(z,U),k(U,e[8]),d(z,K),d(z,X),k(X,e[7]),d(z,Q),d(z,Z),d(z,ee),d(z,te),k(te,e[6]),d(z,ne),d(z,oe),d(z,ie),d(z,re),d(z,le),d(z,se),k(se,e[10]),d(z,ae),d(z,ce),d(B,de),d(B,ue);for(let e=0;e<Te.length;e+=1)Te[e].m(ue,null);Le&&Le.m(ue,null),d(ue,he),d(ue,pe),fe=!0,me||(ge=[v($,"input",e[16]),v(P,"input",e[17]),v(D,"click",e[19]),v(U,"input",e[20]),v(U,"input",e[21]),v(X,"input",e[22]),v(te,"input",e[23]),v(se,"input",e[24]),v(ce,"click",e[14]),v(pe,"click",e[13])],me=!0)},p(e,t){if(2564&t[0]){let n;for(we=Object.keys(e[9]),n=0;n<we.length;n+=1){const o=at(e,we,n);ye[n]?ye[n].p(o,t):(ye[n]=dt(o),ye[n].c(),ye[n].m(c,null))}for(;n<ye.length;n+=1)ye[n].d(1);ye.length=we.length,!we.length&&ve?ve.p(e,t):we.length?ve&&(ve.d(1),ve=null):(ve=ct(),ve.c(),ve.m(c,null))}e[0]?be&&(be.d(1),be=null):be||(be=ut(),be.c(),be.m(x,_)),1&t[0]&&$.value!==e[0]&&k($,e[0]),e[1]?xe&&(xe.d(1),xe=null):xe||(xe=ht(),xe.c(),xe.m(L,E)),2&t[0]&&P.value!==e[1]&&k(P,e[1]);let n=j;if(j=Ce(e,t),j===n?ke[j].p(e,t):(R(),Y(ke[n],1,1,(()=>{ke[n]=null})),J(),F=ke[j],F?F.p(e,t):(F=ke[j]=_e[j](e),F.c()),G(F,1),F.m(O,null)),256&t[0]&&U.value!==e[8]&&k(U,e[8]),128&t[0]&&X.value!==e[7]&&k(X,e[7]),64&t[0]&&k(te,e[6]),1024&t[0]&&se.value!==e[10]&&k(se,e[10]),32&t[0]){let n;for($e=e[5],n=0;n<$e.length;n+=1){const o=lt(e,$e,n);Te[n]?(Te[n].p(o,t),G(Te[n],1)):(Te[n]=wt(o),Te[n].c(),G(Te[n],1),Te[n].m(ue,he))}for(R(),n=$e.length;n<Te.length;n+=1)Se(n);J(),!$e.length&&Le?Le.p(e,t):$e.length?Le&&(Le.d(1),Le=null):(Le=gt(),Le.c(),Le.m(ue,he))}(!fe||16&t[0])&&T(B,"collapsed",e[4])},i(e){if(!fe){G(F);for(let e=0;e<$e.length;e+=1)G(Te[e]);fe=!0}},o(e){Y(F),Te=Te.filter(Boolean);for(let e=0;e<Te.length;e+=1)Y(Te[e]);fe=!1},d(e){e&&h(t),p(ye,e),ve&&ve.d(),be&&be.d(),xe&&xe.d(),ke[j].d(),p(Te,e),Le&&Le.d(),me=!1,o(ge)}}}function vt(e,t,n){let o,i,r,l,s,d,u,h;a(e,we,(e=>n(2,i=e))),a(e,ye,(e=>n(5,r=e))),a(e,me,(e=>n(6,l=e))),a(e,fe,(e=>n(7,s=e))),a(e,pe,(e=>n(8,d=e))),a(e,he,(e=>n(9,u=e))),a(e,ge,(e=>n(10,h=e))),c(ge,h=i,h);let p="",f="",m=[];function g(e){c(we,i=e,i),c(ge,h=e,h)}function w(e){c(pe,d=e,d),c(fe,s=u[i][e].pronunciation,s),c(me,l=u[i][e].description,l),c(ye,r=[],r);for(let t in u[i][e].variants)c(ye,r=[...r,{phrase:t,pronunciation:u[i][e].variants[t].pronunciation,description:u[i][e].variants[t].description}],r);delete u[i][e],he.set(u)}return e.$$.update=()=>{7&e.$$.dirty[0]&&n(3,m=function(){if(!i)return[];let e=u[i],t=p.trim(),n=f.toLowerCase().trim();if(!t&&!n)return Object.keys(e);let o=[];for(let i in e){let r=!t,l=!n;("^"+i+"^").includes(t)&&(r=!0),e[i].description.toLowerCase().includes(n)&&(l=!0);for(let o in e[i].variants)("^"+o+"^").includes(t)&&(r=!0),e[i].variants[o].description.toLowerCase().includes(n)&&(l=!0);r&&l&&o.push(i)}return o}())},n(4,o=!1),[p,f,i,m,o,r,l,s,d,u,h,g,w,function(){c(ye,r=[...r,{phrase:"",pronunciation:"",description:""}],r)},function(){let e=d.trim();if(!e)return;let t=l.trim();if(!t)return;let n=h.trim();if(!n)return;let o=s.trim();if(u[n][e]){if(!window.confirm("This phrase already exists in this category. Are you sure you want to overwrite it?"))return}c(he,u[n][e]={pronunciation:o,description:t,variants:{}},u);for(let t of r){let o=t.phrase.trim();if(!o)continue;let i=t.description.trim();if(!i)continue;let r=t.pronunciation.trim();c(he,u[n][e].variants[o]={pronunciation:r,description:i},u)}he.set(u),c(pe,d="",d),c(fe,s="",s),c(me,l="",l),c(ye,r=[],r),c(we,i=n,i)},e=>g(e),function(){p=this.value,n(0,p)},function(){f=this.value,n(1,f)},e=>w(e),()=>n(4,o=!o),function(){d=this.value,pe.set(d)},()=>c(fe,s=Ee(d),s),function(){s=this.value,fe.set(s)},function(){l=this.value,me.set(l)},function(){h=this.value,ge.set(h)},function(t,n){e.$$.not_equal(r[n].phrase,t)&&(r[n].phrase=t,ye.set(r))},function(t,n){e.$$.not_equal(r[n].pronunciation,t)&&(r[n].pronunciation=t,ye.set(r))},function(t,n){e.$$.not_equal(r[n].description,t)&&(r[n].description=t,ye.set(r))},e=>c(ye,r[e].pronunciation=Ee(r[e].phrase),r)]}class bt extends te{constructor(e){super(),ee(this,e,vt,yt,r,{},null,[-1,-1])}}function xt(e,t,n){const o=e.slice();return o[20]=t[n],o[22]=n,o}function _t(e,t,n){const o=e.slice();return o[23]=t[n],o}function kt(e){let t,n,o,i=e[23]+"";return{c(){t=m("div"),n=m("p"),o=g(i),b(n,"class","prelined"),C(n,"font-family","Gentium"),b(t,"class","column")},m(e,i){u(e,t,i),d(t,n),d(n,o)},p(e,t){4&t&&i!==(i=e[23]+"")&&_(o,i)},d(e){e&&h(t)}}}function Ct(e){let t,n=e[2].slice(3*e[22],3*e[22]+3),o=[];for(let t=0;t<n.length;t+=1)o[t]=kt(_t(e,n,t));return{c(){t=m("div");for(let e=0;e<o.length;e+=1)o[e].c();b(t,"class","row")},m(e,n){u(e,t,n);for(let e=0;e<o.length;e+=1)o[e].m(t,null)},p(e,i){if(4&i){let r;for(n=e[2].slice(3*e[22],3*e[22]+3),r=0;r<n.length;r+=1){const l=_t(e,n,r);o[r]?o[r].p(l,i):(o[r]=kt(l),o[r].c(),o[r].m(t,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(e){e&&h(t),p(o,e)}}}function $t(t){let n,i,r,l,s,a,c,f,y,x,$,T,S,L,E,P,M,O,N,j,F,A,H,q,D,I,B,z,V,W,R,J,G,Y,U,K,X,Q,Z,ee,te,ne,oe,ie,re,le,se,ae,ce,de,ue,he,pe,fe,me,ge,we,ye,ve,be,xe,_e,ke,Ce=Array(t[2].length/3).fill(null),$e=[];for(let e=0;e<Ce.length;e+=1)$e[e]=Ct(xt(t,Ce,e));return{c(){n=m("div"),i=m("div"),r=m("div"),l=m("label"),l.textContent="Onset Consonants",s=w(),a=m("textarea"),c=w(),f=m("br"),y=w(),x=m("label"),x.textContent="Medial Consonants",$=w(),T=m("textarea"),S=w(),L=m("br"),E=w(),P=m("label"),P.textContent="Coda Consonants",M=w(),O=m("textarea"),N=w(),j=m("br"),F=w(),A=m("label"),A.textContent="Vowels",H=w(),q=m("textarea"),D=w(),I=m("br"),B=w(),z=m("label"),z.textContent="Illegal Combinations",V=w(),W=m("textarea"),R=w(),J=m("br"),G=m("br"),Y=w(),U=m("label"),U.textContent="Trial Words",K=w(),X=m("input"),Q=w(),Z=m("p"),ee=g(t[4]),te=w(),ne=m("br"),oe=w(),ie=m("button"),ie.textContent="Generate Words",re=w();for(let e=0;e<$e.length;e+=1)$e[e].c();le=w(),se=m("br"),ae=w(),ce=m("div"),de=m("label"),de.textContent="Pronunciations",ue=w(),he=m("textarea"),pe=w(),fe=m("br"),me=m("br"),ge=w(),we=m("label"),we.textContent="Orthography Testing",ye=w(),ve=m("textarea"),be=w(),xe=m("textarea"),b(l,"for","onsets"),b(a,"id","onsets"),b(a,"class","phonology"),b(x,"for","medials"),b(T,"id","medials"),b(T,"class","phonology"),b(P,"for","codas"),b(O,"id","codas"),b(O,"class","phonology"),b(A,"for","vowels"),b(q,"id","vowels"),b(q,"class","phonology"),b(z,"for","illegals"),b(W,"id","illegals"),b(W,"class","phonology"),b(U,"for","trial"),b(X,"type","text"),b(X,"id","trial"),C(Z,"font-family","Gentium"),b(ie,"class","hover-highlight hover-shadow"),b(r,"class","container column scrolled"),C(r,"height","100%"),b(de,"for","romans"),b(he,"id","romans"),b(he,"rows","30"),C(he,"text-align","left"),b(he,"class","prelined"),b(we,"for","test-romans"),b(ve,"id","test-romans"),b(ve,"rows","4"),b(ve,"class","prelined"),b(xe,"id","test-romans-result"),b(xe,"class","pronunciation"),xe.readOnly=!0,xe.value=t[3],b(ce,"class","container column scrolled"),C(ce,"height","100%"),b(i,"class","row"),C(i,"height","92vh"),b(n,"class","tab-pane")},m(e,o){u(e,n,o),d(n,i),d(i,r),d(r,l),d(r,s),d(r,a),k(a,t[5]),d(r,c),d(r,f),d(r,y),d(r,x),d(r,$),d(r,T),k(T,t[6]),d(r,S),d(r,L),d(r,E),d(r,P),d(r,M),d(r,O),k(O,t[7]),d(r,N),d(r,j),d(r,F),d(r,A),d(r,H),d(r,q),k(q,t[8]),d(r,D),d(r,I),d(r,B),d(r,z),d(r,V),d(r,W),k(W,t[9]),d(r,R),d(r,J),d(r,G),d(r,Y),d(r,U),d(r,K),d(r,X),k(X,t[0]),d(r,Q),d(r,Z),d(Z,ee),d(r,te),d(r,ne),d(r,oe),d(r,ie),d(r,re);for(let e=0;e<$e.length;e+=1)$e[e].m(r,null);d(r,le),d(r,se),d(i,ae),d(i,ce),d(ce,de),d(ce,ue),d(ce,he),k(he,t[10]),d(ce,pe),d(ce,fe),d(ce,me),d(ce,ge),d(ce,we),d(ce,ye),d(ce,ve),k(ve,t[1]),d(ce,be),d(ce,xe),_e||(ke=[v(a,"input",t[11]),v(T,"input",t[12]),v(O,"input",t[13]),v(q,"input",t[14]),v(W,"input",t[15]),v(X,"input",t[16]),v(ie,"click",t[17]),v(he,"input",t[18]),v(he,"blur",Pe),v(ve,"input",t[19])],_e=!0)},p(e,[t]){if(32&t&&k(a,e[5]),64&t&&k(T,e[6]),128&t&&k(O,e[7]),256&t&&k(q,e[8]),512&t&&k(W,e[9]),1&t&&X.value!==e[0]&&k(X,e[0]),16&t&&_(ee,e[4]),4&t){let n;for(Ce=Array(e[2].length/3).fill(null),n=0;n<Ce.length;n+=1){const o=xt(e,Ce,n);$e[n]?$e[n].p(o,t):($e[n]=Ct(o),$e[n].c(),$e[n].m(r,le))}for(;n<$e.length;n+=1)$e[n].d(1);$e.length=Ce.length}1024&t&&k(he,e[10]),2&t&&k(ve,e[1]),8&t&&(xe.value=e[3])},i:e,o:e,d(e){e&&h(n),p($e,e),_e=!1,o(ke)}}}function Tt(e,t,n){let o,i,r,l,c,d,u,h,p;a(e,xe,(e=>n(5,l=e))),a(e,_e,(e=>n(6,c=e))),a(e,ke,(e=>n(7,d=e))),a(e,Ce,(e=>n(8,u=e))),a(e,$e,(e=>n(9,h=e))),a(e,be,(e=>n(10,p=e)));let f="",m="";return e.$$.update=()=>{1&e.$$.dirty&&n(4,o=function(e){let t=()=>0===Math.floor(2*Math.random()),n=e=>e[Math.floor(Math.random()*e.length)],o={Onsets:s(xe).split(/\s+/g),Medials:s(_e).split(/\s+/g),Codas:s(ke).split(/\s+/g),Vowels:s(Ce).split(/\s+/g),Illegals:s($e)?s($e).split(/\s+/g):["N/A"]},i="^"+e;const r=e=>(e+="^",o.Illegals.some((t=>e.includes(t)))?"":e.replace(/\^/g,""));let l=!1;for(let e of o.Vowels)if(i.includes(e)&&i.lastIndexOf(e)===i.length-e.length){if(t()){i+=n(o.Medials)+n(o.Vowels),l=!0;break}return i+=n(o.Codas),r(i)}return!l&&(i+=n(o.Vowels),t())?(t()&&(i+=n(o.Codas)),r(i)):(t()?i+=n(o.Codas):(i+=n(o.Medials)+n(o.Vowels),t()&&(i+=n(o.Codas))),r(i))}(f)),2&e.$$.dirty&&n(3,i=Ee(m))},n(2,r=Array(24).fill("")),[f,m,r,i,o,l,c,d,u,h,p,function(){l=this.value,xe.set(l)},function(){c=this.value,_e.set(c)},function(){d=this.value,ke.set(d)},function(){u=this.value,Ce.set(u)},function(){h=this.value,$e.set(h)},function(){f=this.value,n(0,f)},()=>n(2,r=Array(24).fill(null).map((e=>function(){const e=()=>{let e={Onsets:s(xe).split(/\s+/g),Medials:s(_e).split(/\s+/g),Codas:s(ke).split(/\s+/g),Vowels:s(Ce).split(/\s+/g),Illegals:s($e)?s($e).split(/\s+/g):["N/A"]},t=()=>0===Math.floor(2*Math.random()),n=e=>e[Math.floor(Math.random()*e.length)],o="^";t()||(o+=n(e.Onsets)),o+=n(e.Vowels);for(let i=0;i<2;i++)(t()||2===o.length)&&(o+=n(e.Medials),o+=n(e.Vowels));return t()&&(o+=n(e.Codas)),o+="^",e.Illegals.some((e=>o.includes(e)))?"":o.replace(/\^/g,"")};for(let t=0;t<50;t++){let t=e();if(t)return t}return""}()))),function(){p=this.value,be.set(p)},function(){m=this.value,n(1,m)}]}class St extends te{constructor(e){super(),ee(this,e,Tt,$t,r,{})}}const Lt=require("@editorjs/editorjs"),Et=require("@editorjs/header"),Pt=require("@editorjs/paragraph"),Mt=require("@editorjs/table"),Ot=require("@editorjs/underline");class Nt{static get CSS(){return"cdx-monospace"}constructor({api:e}){this.api=e,this.button=null,this.tag="CODE",this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}static get isInline(){return!0}render(){return this.button=document.createElement("button"),this.button.type="button",this.button.textContent="M",this.button.classList.add(this.api.styles.inlineToolButton),this.button}surround(e){if(!e)return;const t=this.api.selection.findParentTag(this.tag,Nt.CSS);t?this.unwrap(t):this.wrap(e)}wrap(e){const t=document.createElement(this.tag);t.classList.add(Nt.CSS),t.appendChild(e.extractContents()),e.insertNode(t),this.api.selection.expandToTag(t)}unwrap(e){this.api.selection.expandToTag(e);const t=window.getSelection(),n=t.getRangeAt(0),o=n.extractContents();e.parentNode.removeChild(e),n.insertNode(o),t.removeAllRanges(),t.addRange(n)}checkState(){const e=this.api.selection.findParentTag(this.tag,Nt.CSS);this.button.classList.toggle(this.iconClasses.active,!!e)}static get sanitize(){return{code:{class:Nt.CSS}}}}function jt(e){let t={holder:"docs-tab",tools:{underline:Ot,monospace:Nt,header:{class:Et,inlineToolbar:!0},paragraph:{class:Pt,inlineToolbar:!0,config:{placeholder:"This panel can be used to document and describe your languge’s features in greater detail."}},table:{class:Mt,inlineToolbar:!0,config:{rows:3,cols:3,withHeadings:!0}}}};e&&(t.data=e),Te.set(new Lt(t))}function Ft(t){let n;return{c(){n=m("div"),n.innerHTML='<div class="container row text-center" style="height: 90vh; overflow-y: auto;"><div class="column" style="font-family: Gentium" id="docs-tab"></div></div>',b(n,"class","tab-pane"),b(n,"spellcheck","false")},m(e,t){u(e,n,t)},p:e,i:e,o:e,d(e){e&&h(n)}}}function At(e){return jt(!1),[]}class Ht extends te{constructor(e){super(),ee(this,e,At,Ft,r,{})}}const{ipcRenderer:qt}=require("electron"),Dt=require("fs"),It=require("path");async function Bt(e){let t;await qt.invoke("getUserDataPath").then((e=>{t=e})),e(t)}async function zt(e){let t;await s(Te).save().then((e=>{t=e}));const n=e=>s(e).trim().split(/\s+/g);let o,i={Version:2,Lexicon:s(ae),Alphabet:s(ce).trim(),Phrasebook:s(he),Phonotactics:{Onsets:n(xe),Medials:n(_e),Codas:n(ke),Vowels:n(Ce),Illegals:n($e)},Romanization:s(be).trim(),Docs:t,HeaderTags:s(se).trim(),IgnoreDiacritics:s(le),CaseSensitive:s(re)};return o=e?new Blob([JSON.stringify(i)]):JSON.stringify(i),o}function Vt(e,t){for(let n of e.blocks)switch(n.type){case"header":let e=document.createElement(`h${n.data.level}`);e.innerHTML=n.data.text,t.appendChild(e);break;case"paragraph":let o=document.createElement("p");o.innerHTML=n.data.text,t.appendChild(o);break;case"table":let i=document.createElement("table"),r=document.createElement("tbody");n.data.content.forEach((e=>{let t=document.createElement("tr");e.forEach((e=>{let n=document.createElement("td");n.innerHTML=e,t.appendChild(n)})),r.appendChild(t)})),i.appendChild(r),t.appendChild(i)}return t}async function Wt(){if(!s(ie).trim()){let e=window.prompt("Please enter a file name before saving.");ie.set(e)}let e=await zt(blob=!1);try{Bt((t=>{Dt.existsSync(`${t}${It.sep}Lexicons${It.sep}`)||Dt.mkdirSync(`${t}${It.sep}Lexicons${It.sep}`),Dt.writeFileSync(`${t}${It.sep}Lexicons${It.sep}${s(ie)}.lexc`,e,"utf8")})),s(Le)?new Notification(`The ${s(ie)} file has been auto-saved.`):window.alert("The file has been saved.")}catch(e){window.alert("There was a problem saving your file. Please contact the developer."),console.log(e)}}const Rt=async()=>{let e=await zt(!0),t=await window.showSaveFilePicker({suggestedName:`${s(f)}.lexc`});await t.requestPermission({mode:"readwrite"});let n=await t.createWritable();try{await n.write(e)}catch(e){return window.alert("The file failed to save. Please contact the developer for assistance."),console.log(e),void await n.close()}await n.close(),window.alert("The file saved successfully.")},Jt=async()=>{let e="";const t=s(ae);for(let n in t)e+=`${n}\n${t[n][0]}\n${t[n][1]}\n\n`;let n=new Blob([e]),o=await window.showSaveFilePicker({suggestedName:`${s(ie)}.txt`});await o.requestPermission({mode:"readwrite"});let i=await o.createWritable();try{await i.write(n)}catch(e){window.alert("The file failed to export.")}await i.close(),window.alert("The file exported successfully.")},Gt=async()=>{const e=s(ae);let t=[["Word","Pronunciation","Definition"]];for(let n in e)t.push([n,e[n][0],e[n][1]]);let n=t.map((e=>e.map(String).map((e=>e.replaceAll('"','""'))).map((e=>`"${e}"`)).join(","))).join("\r\n");let o=new Blob([n]),i=await window.showSaveFilePicker({suggestedName:`${s(ie)}.csv`});await i.requestPermission({mode:"readwrite"});let r=await i.createWritable();try{await r.write(o)}catch(e){window.alert("The file failed to export. Please contact the developer for assistance."),console.log(e)}await r.close(),window.alert("The file exported successfully.")},Yt=async()=>{let e=zt(!0),t=await window.showSaveFilePicker({suggestedName:`${s(ie)}.json`});await t.requestPermission({mode:"readwrite"});let n=await t.createWritable();try{await n.write(e)}catch(e){window.alert("The file failed to export.")}await n.close(),window.alert("The file exported successfully.")},Ut={all:async()=>{let e=document.createElement("html"),t=document.createElement("head");t.innerHTML=`\n                <meta charset="UTF-8" />\n                <title>${s(ie)}</title>\n                <link rel="preconnect" href="https://fonts.googleapis.com">\n                <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>\n                <link href="https://fonts.googleapis.com/css2?family=Gentium+Book+Plus:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">\n            `;let n=document.createElement("script");n.innerHTML=`\n                const lex_body = document.getElementById('lex-body');\n                const entry_count = document.getElementById('entry-counter');\n                const srch_wrd = document.getElementById('search-wrd');\n                const srch_def = document.getElementById('search-def');\n                const srch_tag = document.getElementById('search-tag');\n                const srch_phrase = document.getElementById('search-phrase');\n                const srch_descriptions = document.getElementById('search-description');\n                const cat_body = document.getElementById('category-body');\n                const book_body = document.getElementById('phrasebook-body');\n                const variant_body = document.getElementById('variants-body');\n                const lexicon = ${JSON.stringify(s(ae))};\n                const phrasebook = ${JSON.stringify(s(he))};\n                let selected_cat;\n    \n                function sort_lex_keys() {\n                    let htags = ${JSON.stringify(s(se).toLowerCase().trim().split(/\\s+/))};\n                    let all_words = structuredClone(lexicon)\n                    let tag_ordered_lexes = []\n                    for (let tag of htags) {\n                        tag_ordered_lexes.push([])\n                        for (let word in all_words) {\n                            if (lexicon[word][3].includes(tag)) {\n                                tag_ordered_lexes[tag_ordered_lexes.length-1].push(word)\n                            }\n                        }\n                        // console.log(tag_ordered_lexes, tag_ordered_lexes[tag_ordered_lexes.length-1])\n                        for (let w of tag_ordered_lexes[tag_ordered_lexes.length-1]) {\n                            delete all_words[w];\n                        }\n                    }\n                    let remaining_words = []\n                    for (let w in all_words) {remaining_words.push(w)}\n                    tag_ordered_lexes.push(remaining_words)\n                \n                    // Lowercase alphabet if case-sensitivity is unticked\n                    var alphabet = ${s(re)?JSON.stringify(alphabet_input.value.trim()):JSON.stringify(alphabet_input.value.trim().toLowerCase())};\n                    let order = alphabet.trim().split(/\\s+/);\n                    // to make sure we find the largest tokens first, i.e. for cases where 'st' comes before 'str' alphabetically\n                    find_in_order = Array.from(new Set(order)).sort((a, b) => b.length - a.length); // descending, ensures uniqueness\n                \n                    let final_sort = [];\n                    for (let group of tag_ordered_lexes) {\n                        let lex = {};\n                        let list = [];\n                        for (let word of group) {\n                            // case sensitivity\n                            let w = ${s(re)?"word":"word.toLowerCase()"};\n                \n                            // diacritic sensitivity\n                            w = ${s(le)?'w.normalize("NFD").replace(/\\p{Diacritic}/gu, "")':"w"};\n                \n                            for (let token of find_in_order) {\n                                w = w.replace(new RegExp(\`\${token}\`, 'g'), \`\${order.indexOf(token)}.\`)\n                            }\n                            append = w.split('.');\n                            for (let i of append) { append[append.indexOf(i)] = +i || 0 }\n                            lex[word] = append;\n                            list.push(append);\n                        }\n                        list.sort( (a, b) => {\n                            for (let i of a) {\n                                let j = b[a.indexOf(i)];\n                                if (i === j) { continue };\n                                return i - j;\n                            }\n                            return 0;\n                        });\n                        let sorted = [];\n                        for (let key in lex) { sorted.push([key, list.indexOf(lex[key])]) } // [ [word, index], [word, index], ...]\n                        sorted.sort((a, b) => a[1] - b[1]);\n                        for (let i = 0; i < sorted.length; i++) {\n                            sorted[i] = sorted[i][0];\n                        }\n                        for (let i of sorted) {\n                            final_sort.push(i)\n                        }\n                    }\n                    return final_sort;\n                }\n                function rewrite_entries(keys = false) {\n                    let sorted_keys = sort_lex_keys();\n                    lex_body.replaceChildren();\n                \n                    if (sorted_keys.length !== 0) {\n                        for (let key of sorted_keys) {\n                            if ( !keys || keys.includes(key) ) {\n                                let entry = document.createElement('div');\n                                entry.className = 'lex-entry';\n                                entry.id = key;\n                                \n                                let word = document.createElement('p');\n                                word.appendChild( document.createTextNode(key) );\n                                word.style.fontStyle = 'italic';\n                                \n                                let pron = document.createElement('p');\n                                pron.className = 'pronunciation';\n                                pron.appendChild( document.createTextNode(lexicon[key][0]) );\n                                \n                                let defn = document.createTextNode(lexicon[key][1]);\n                                \n                                let tags = document.createElement('div');\n                                for (let tag of lexicon[key][3]) {\n                                    let newTag = document.createElement('div');\n                                    newTag.appendChild( document.createTextNode(tag) );\n                                    newTag.className = 'tag-item';\n                                    tags.appendChild(newTag);\n                                }\n                                \n                                entry.append(word, pron, tags, defn);\n                \n                                lex_body.appendChild(entry);\n                            }\n                        }\n                    }\n                    if (!keys) {\n                        var count = document.createTextNode(\`\${Object.keys(lexicon).length} Entries\`);\n                    } else {\n                        var count = document.createTextNode(\`\${keys.length} Matches\`);\n                    }\n                    entry_count.replaceChildren(count)\n                }\n                function search_lex() {\n                    let s = srch_wrd.value.trim();\n                    let z = srch_def.value.toLowerCase().trim();\n                    let x = srch_tag.value.trim();\n                    if (s === 'Search by word…'){s = ''};\n                    if (z === 'search definition…'){z = ''};\n                    if (x === 'Search by tags…' || x === ''){ x = [] } else { x = x.split(/\\s+/g) }\n                    let keys = false;\n                    if (s !== '' || z !== '' || x.length !== 0 ) {\n                        let l = [s + '|', z + '|'];\n                        // Turn l into a list of [search by word terms, search by def terms]\n                        for (let e of l) {\n                            let n = l.indexOf(e);\n                            l[n] = [];\n                            e = e.split('|');\n                            for (let a of e) { l[n].push( a.trim() ); }\n                        }\n                        keys = [];\n                        for (let word in lexicon) {\n                            let w = \`^\${word}^\`;\n                            let match = true;\n                            for (let a of l[0]) { // words\n                                if ( !w.includes(a) ) { match = false; }\n                            }\n                            for (let a of l[1]) { // definitions\n                                if ( !lexicon[word][1].toLowerCase().includes(a) ) { match = false; }\n                            }\n                            if (lexicon[word][3].length !== 0) {\n                                let any_tag_match;\n                                for (let tag of lexicon[word][3]) {\n                                    for (let a of x) { // tags\n                                        if (\`^\${tag}^\`.includes(a)) { any_tag_match = true; }\n                                    }\n                                }\n                                if (!any_tag_match) { match = false; }\n                            } else {\n                                if (x.length !== 0) { match = false; }\n                            }\n                            if (match) { keys.push(word); }\n                        }\n                    }\n                    rewrite_entries(keys);\n                }\n                srch_wrd.onkeyup = search_lex; \n                srch_def.onkeyup = search_lex;\n                srch_tag.onkeyup = search_lex;\n                srch_wrd.onfocus = function() {\n                    if (srch_wrd.value === 'Search by word…') {\n                        srch_wrd.style.color = 'white';\n                        srch_wrd.value = '';\n                    }\n                }\n                srch_wrd.onblur = function() {\n                    if (srch_wrd.value === '') {\n                        srch_wrd.value = 'Search by word…';\n                    }\n                }\n                srch_def.onfocus = function() {\n                    if (srch_def.value === 'Search definition…') {\n                        srch_def.style.color = 'white';\n                        srch_def.value = '';\n                    }\n                }\n                srch_def.onblur = function() {\n                    if (srch_def.value === '') {\n                        srch_def.value = 'Search definition…';\n                    }\n                }\n                srch_tag.onfocus = function() {\n                    if (srch_tag.value === 'Search by tags…') {\n                        srch_tag.style.color = 'white';\n                        srch_tag.value = '';\n                    }\n                }\n                srch_tag.onblur = function() {\n                    if (srch_tag.value === '') {\n                        srch_tag.value = 'Search by tags…';\n                    }\n                }\n                srch_wrd.onblur(); srch_def.onblur(); srch_tag.onblur();\n                \n                function update_book(keys=false) {\n                    if (!keys) { keys = [false] }\n                    if (selected_cat) { // make sure category isn't blank\n                        while (book_body.firstChild) {\n                            book_body.removeChild(book_body.lastChild)\n                        }\n                        let title = document.createElement("p");\n                        title.classList = 'table-title capitalize';\n                        title.appendChild( document.createTextNode( selected_cat.toLowerCase()) );\n                        book_body.append(title, /* document.createElement('hr') */ );\n                \n                        for (let entry in phrasebook[selected_cat]) {\n                            if (keys.indexOf(entry) !== -1 || keys[0] === false) {\n                                // base entry\n                                let entry_container = document.createElement('div');\n                                entry_container.className = 'lex-entry';\n                                let phrase = document.createElement('p');\n                                phrase.appendChild( document.createTextNode(entry) );\n                                phrase.style.fontStyle = 'italic';\n                                let pron = document.createElement('p');\n                                pron.className = 'pronunciation';\n                                pron.appendChild( document.createTextNode(phrasebook[selected_cat][entry].pronunciation) );\n                                let desc = document.createElement('p');\n                                desc.className = 'prelined';\n                                desc.appendChild( document.createTextNode(phrasebook[selected_cat][entry].description) );\n                                entry_container.append(phrase, pron, desc);\n                                // variant entries\n                \n                                if ( Object.keys(phrasebook[selected_cat][entry].variants).length > 0) {\n                                    let t = document.createElement('p');\n                                    t.appendChild( document.createTextNode('⋲ ᴠᴀʀɪᴀɴᴛꜱ ⋺') );\n                                    entry_container.append(t);\n                \n                                    var it = 0;\n                                    var crow = document.createElement('div');\n                                    crow.classList = 'row variants';\n                                    entry_container.appendChild(crow);\n                                    for (variant in phrasebook[selected_cat][entry].variants) {\n                                        it++;\n                                        if (it === 4) {\n                                            it = 0;\n                                            entry_container.appendChild(crow);\n                                            var crow = document.createElement('div');\n                                            crow.classList = 'row variants';\n                                            entry_container.appendChild(crow);\n                                        }\n                                        let vcol = document.createElement('div');\n                                        vcol.className = 'column';\n                \n                                        let v_phrase = document.createElement('p');\n                                        v_phrase.appendChild( document.createTextNode(variant) );\n                                        v_phrase.style.fontStyle = 'italic';\n                                        let v_pron = document.createElement('p');\n                                        v_pron.className = 'pronunciation';\n                                        v_pron.appendChild( document.createTextNode(phrasebook[selected_cat][entry].variants[variant].pronunciation) );\n                                        let v_desc = document.createElement('p');\n                                        v_desc.className = 'prelined';\n                                        v_desc.appendChild( document.createTextNode(phrasebook[selected_cat][entry].variants[variant].description) );\n                        \n                                        vcol.append(v_phrase, v_pron, v_desc);\n                                        crow.appendChild(vcol);                    \n                                    }\n                                }\n                \n                                entry_container.addEventListener('click', () => edit_book_entry(entry)); // edit functionality\n                                book_body.appendChild(entry_container);\n                            }\n                        }\n                    } else { book_body.replaceChildren(); }\n                }\n                \n                function update_categories() {\n                    while (cat_body.firstChild) {\n                        cat_body.removeChild(cat_body.lastChild);\n                    }\n                    for (let cat in phrasebook) {\n                        let i = document.createElement("div");\n                        i.appendChild( document.createTextNode(cat) );\n                        i.className = 'lex-entry capitalize';\n                        i.onclick = function () { \n                            selected_cat = cat; \n                            update_book();\n                        };\n                        cat_body.appendChild(i);\n                    };\n                    update_book();\n                }\n                \n                srch_phrase.onfocus = function() {\n                    if (srch_phrase.value === 'Search by phrase…') {\n                        srch_phrase.style.color = 'white';\n                        srch_phrase.value = '';\n                    }\n                }\n                srch_phrase.onblur = function() {\n                    if (srch_phrase.value === '') {\n                        srch_phrase.value = 'Search by phrase…';\n                    }\n                }\n                srch_descriptions.onfocus = function() {\n                    if (srch_descriptions.value === 'Search descriptions…') {\n                        srch_descriptions.style.color = 'white';\n                        srch_descriptions.value = '';\n                    }\n                }\n                srch_descriptions.onblur = function() {\n                    if (srch_descriptions.value === '') {\n                        srch_descriptions.value = 'Search descriptions…';\n                    }\n                }\n                srch_phrase.onblur(); srch_descriptions.onblur();\n                \n                function search_book() {\n                    let scope = phrasebook[selected_cat];\n                    let ps = srch_phrase.value.trim();\n                    let ds = srch_descriptions.value.toLowerCase().trim();\n                    if (ps === 'Search by phrase…') {ps = ''};\n                    if (ds === 'search descriptions…') {ds = ''};\n                    let keys = false;\n                    if (ps !== '' || ds !== '') {\n                        keys = [];\n                        for (let entry in scope) {\n                            let term = '^' + entry + '^';\n                            let pm = !ps.length;\n                            let dm = !ds.length;\n                            // console.log(scope[entry].description, scope[entry].description.includes(ds));\n                            if (term.includes(ps)) {\n                                pm = true;\n                            }\n                            if ( scope[entry].description.toLowerCase().includes(ds) ) {\n                                dm = true;\n                            } \n                            for (let variant in scope[entry].variants) {\n                                let v_term = '^' + variant + '^';\n                                if (v_term.includes(ps)) {\n                                    pm = true;\n                                }\n                                if (scope[entry].variants[variant].description.toLowerCase().includes(ds)) {\n                                    dm = true;\n                                }\n                            }\n                            console.log(pm, dm, ps, ds, entry);\n                            if (pm && dm) {\n                                keys.push(entry);\n                            }\n                        }\n                    }\n                    update_book(keys);\n                }\n                srch_phrase.onkeyup = search_book;\n                srch_descriptions.onkeyup = search_book;\n    \n                update_book();\n                update_categories();\n                rewrite_entries();\n            `;let o=document.createElement("style");o.innerHTML=Dt.readFileSync(It.join(It.dirname(__dirname),"styles/index.css"),"utf8");let i=document.createElement("style");i.innerHTML=Dt.readFileSync(It.join(It.dirname(__dirname),theme_select.value),"utf8");let r=document.createElement("style");r.innerHTML=Dt.readFileSync(It.join(It.dirname(__dirname),"styles/html_export.css"),"utf8");let l=document.createElement("div");l.classList.add("container","column","scrolled"),await s(Te).save().then((e=>{l=Vt(e,l)}));let a=document.createElement("body");a.innerHTML=`\n                <h1>${s(ie)}</h1>\n                <div class='tab-pane text-center'>\n                    <div class="row" style="max-height: 90vh">\n                        <div class='container column'>\n                            <div class='search-row'>\n                                <div class="column">\n                                    <label for="search-wrd" style="display: none">Search by word</label>\n                                    <input id="search-wrd" type="text" class="search" />\n                                </div>\n                                <div class="column">\n                                    <label for="search-tag" style="display: none">Search by tags</label>\n                                    <input id="search-tag" type="text" class="search" />\n                                </div>\n                            </div>\n                            <label for="search-def" style="display: none">Search definitions</label>\n                            <input id="search-def" type="text" class="search">\n                            <div class='scrolled' style="height: 64vh">\n                                <p class="prelined lex-body" id="lex-body">The lexicon should appear here.</p>\n                            </div>\n                            <p id="entry-counter"></p>\n                        </div>\n                        ${l.outerHTML}\n                    </div>\n    \n                    \x3c!-- Phrasebook --\x3e\n                    <div class="row" style="height:90vh;">\n                        \x3c!-- Categories --\x3e\n                        <div class="container column sidebar">\n                            <p>Categories</p>\n                            <hr />\n                            <div class="column scrolled" style="max-height: 90%;" id="category-body">\n                                <p class="info">Phrasebook categories appear here.</p>\n                            </div>\n                        </div>\n                        <div class="container column">\n                            \x3c!-- Search Fields --\x3e\n                            <div class="search-row">\n                                <div class="column">\n                                    <label for="search-phrase" style="display: none">Search by phrase…</label>\n                                    <input id="search-phrase" type="text" class="search" />\n                                </div>\n                                <div class="column">\n                                    <label for="search-description" style="display: none">Search descriptions…</label>\n                                    <input id="search-description" type="text" class="search" />\n                                </div>\n                            </div>\n                            \x3c!-- Book --\x3e\n                            <div class="column scrolled" id="phrasebook-body" style="max-height: 80%;">\n                                <p class="info">Select a category from the left.</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <br><br>\n            `,t.append(o,i,r),e.append(t,a,n);let c=e.outerHTML,d=new Blob(["\ufeff",c],{type:"tex/html; charset=utf-8;"}),u=await window.showSaveFilePicker({suggestedName:`${s(ie)}.html`});await u.requestPermission({mode:"readwrite"});let h=await u.createWritable();try{console.log(typeof d),await h.write(d)}catch(e){return window.alert("The file failed to export. Please contact the developer for assistance."),console.log(e),void await h.close()}await h.close(),window.alert("The file exported successfully.")},docs:async()=>{let e=document.createElement("html"),t=document.createElement("head");t.innerHTML=`\n                <meta charset="UTF-8" />\n                <title>${s(ie)} Docs</title>\n                <link rel="preconnect" href="https://fonts.googleapis.com">\n                <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>\n                <link href="https://fonts.googleapis.com/css2?family=Gentium+Book+Plus:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">\n            `;let n=document.createElement("style");n.innerHTML=Dt.readFileSync(It.join(It.dirname(__dirname),"styles/index.css"),"utf8");let o=document.createElement("style");o.innerHTML=Dt.readFileSync(It.join(It.dirname(__dirname),theme_select.value),"utf8");let i=document.createElement("style");i.innerHTML=Dt.readFileSync(It.join(It.dirname(__dirname),"styles/html_export.css"),"utf8"),t.append(n,o,i),e.appendChild(t);let r=document.createElement("body");await s(Te).save().then((e=>{r=Vt(e,r)})),r.style.padding="12em",r.classList.add("container"),e.appendChild(r);let l=e.outerHTML,a=new Blob(["\ufeff",l],{type:"tex/html; charset=utf-8;"}),c=await window.showSaveFilePicker({suggestedName:`${s(ie)}_Docs.html`});await c.requestPermission({mode:"readwrite"});let d=await c.createWritable();try{await d.write(a)}catch(e){return window.alert("The file failed to export. Please contact the developer."),console.log(e),void await d.close()}await d.close(),window.alert("The file exported successfully.")}},Kt={1.9:e=>{try{ae.set(e.Lexicon)}catch(e){window.alert("There was a problem loading the contents of the lexicon. Please contact the developer."),console.log(e)}try{ce.set(e.Alphabet)}catch(e){window.alert("There was a problem loading the alphabetical order. Please contact the developer for assistance."),console.log(e)}try{be.set(e.Romanization),Pe()}catch(e){window.alert("There was a problem loading the romanizations. Please contact the developer for assistance."),console.log(e)}try{he.set(e.Phrasebook)}catch(e){window.alert("There was a problem loading the phrasebook. Please contact the developer for assistance."),console.log(e)}try{xe.set(e.Phonotactics.Initial.join(" ")),_e.set(e.Phonotactics.Middle.join(" ")),ke.set(e.Phonotactics.Final.join(" ")),Ce.set(e.Phonotactics.Vowel.join(" ")),$e.set(e.Phonotactics.Illegal.join(" "))}catch(e){window.alert("There was a problem loading the phonotactics data. Please contact the developer for assistance."),console.log(e)}try{s(Te).destroy(),jt(e.Docs)}catch(e){window.alert("There was a problem loading the documentation data. Please contact the developer for assistance."),console.log(e)}try{se.set(e.HeaderTags)}catch(e){window.alert("There was a problem loading the header tags."),console.log(e)}le.set(e.IgnoreDiacritics),re.set(e.CaseSensitive)}};function Xt(e,t,n){const o=e.slice();return o[36]=t[n],o}function Qt(t){let n;return{c(){n=m("div"),b(n,"class","planet "+t[36])},m(e,t){u(e,n,t)},p:e,d(e){e&&h(n)}}}function Zt(t){let n,i,r,l,s,a,c,f,y,$,T,S,L,E,P,M,O,N,j,F,A,H,q,D,I,B,z,V,W,R,J,G,Y,U,K,X,Q,Z,ee,te,ne,oe,ie,re,le,se,ae,ce,de,ue,he,pe,fe,me,ge,we,ye,ve,be,xe,_e,ke,Ce,$e,Te,Se,Le,Ee,Pe,Me,Oe,Ne,je,Fe,Ae,He,qe,De,Ie,Be,ze,Ve,We,Re,Je,Ge,Ye,Ue,Ke,Xe,Qe,Ze,et,tt,nt,ot,it,rt,lt,st,at,ct,dt,ut,ht,pt,ft,mt=["mercury","venus","earth","mars","jupiter","saturn","uranus","neptune","pluto"],gt=[];for(let e=0;e<9;e+=1)gt[e]=Qt(Xt(t,mt,e));return{c(){n=m("div"),i=m("div"),r=m("div"),l=m("p"),l.textContent="Document",s=w(),a=m("label"),a.textContent="Name",c=w(),f=m("input"),y=w(),$=m("br"),T=w(),S=m("div"),L=m("div"),E=m("button"),E.textContent="Save…",P=w(),M=m("button"),M.textContent="Open…",O=w(),N=m("p"),N.textContent="Save your lexicon or open a previously saved one.",j=w(),F=m("div"),A=m("div"),H=m("div"),q=w();for(let e=0;e<9;e+=1)gt[e].c();D=w(),I=m("p"),B=g(t[5]),z=w(),V=m("div"),W=m("button"),W.textContent="Export…",R=w(),J=m("button"),J.textContent="Import…",G=w(),Y=m("p"),Y.textContent="Export and import your own copies of the lexicon file.",U=w(),K=m("br"),X=w(),Q=m("p"),Q.textContent="Lexicon Header Tags",Z=w(),ee=m("div"),te=m("textarea"),ne=w(),oe=m("label"),oe.textContent="Entries with these tags will be sorted separately at the top of the lexicon.",ie=w(),re=m("br"),le=w(),se=m("button"),se.textContent="Open New Window",ae=w(),ce=m("br"),de=w(),ue=m("p"),ue.textContent="Change Pronunciations & Orthography",he=w(),pe=m("div"),fe=m("label"),fe.textContent="Orthography Pattern",me=w(),ge=m("input"),we=w(),ye=m("label"),ye.textContent="Replace With",ve=w(),be=m("input"),xe=w(),_e=m("button"),_e.textContent="Commit Change",ke=w(),Ce=m("br"),$e=w(),Te=m("p"),Te.textContent="Export Lexicon",Se=w(),Le=m("p"),Le.textContent="HTML",Ee=w(),Pe=m("div"),Me=m("div"),Oe=m("button"),Oe.textContent="Everything",Ne=w(),je=m("div"),Fe=m("button"),Fe.textContent="Docs Only",Ae=w(),He=m("button"),He.textContent="Text File",qe=w(),De=m("button"),De.textContent="CSV",Ie=w(),Be=m("button"),Be.textContent="JSON",ze=w(),Ve=m("br"),We=w(),Re=m("p"),Re.textContent="Import Lexicon from CSV",Je=w(),Ge=m("div"),Ye=m("div"),Ue=m("div"),Ke=m("label"),Ke.textContent="Words Column",Xe=w(),Qe=m("input"),Ze=w(),et=m("div"),tt=m("label"),tt.textContent="Definitions Column",nt=w(),ot=m("input"),it=w(),rt=m("label"),rt.textContent="First Row Is Column Labels",lt=w(),st=m("input"),at=w(),ct=m("button"),ct.textContent="Import",dt=w(),ut=m("br"),ht=m("br"),b(a,"for","file-name"),b(f,"type","text"),b(f,"id","file-name"),b(E,"class","hover-highlight hover-shadow"),b(M,"class","hover-highlight hover-shadow"),b(N,"class","info"),b(L,"class","column"),b(H,"class","sun"),b(A,"class","milkyWay"),b(F,"class","column"),b(W,"class","hover-highlight hover-shadow"),b(J,"class","hover-highlight hover-shadow"),b(Y,"class","info"),b(V,"class","column"),b(S,"class","narrow row"),b(oe,"for","header-tags"),b(oe,"class","info"),b(ee,"class","narrow"),b(se,"class","hover-highlight hover-shadow"),b(fe,"for","ortho-pattern"),b(ge,"id","ortho-pattern"),b(ge,"type","text"),b(ye,"for","new-pattern"),b(be,"id","new-pattern"),b(be,"type","text"),b(_e,"class","hover-highlight hover-shadow"),b(pe,"class","narrow"),b(Oe,"class","hover-highlight hover-shadow"),b(Me,"class","column"),b(Fe,"class","hover-highlight hover-shadow"),b(je,"class","column"),b(Pe,"class","row narrow"),b(He,"class","hover-highlight hover-shadow"),b(De,"class","hover-highlight hover-shadow"),b(Be,"class","hover-highlight hover-shadow"),b(Ke,"for","word-column"),b(Qe,"type","number"),b(Qe,"id","word-column"),b(Ue,"class","column"),b(tt,"for","def-column"),b(ot,"type","number"),b(ot,"id","def-column"),b(et,"class","column"),b(Ye,"class","row"),b(Ge,"class","narrow"),b(rt,"for","row-one-is-labels"),b(st,"type","checkbox"),b(st,"id","row-one-is-labels"),b(ct,"class","hover-highlight hover-shadow"),b(r,"class","column container"),C(r,"overflow-y","auto"),b(i,"class","row"),C(i,"height","95vh"),b(n,"class","tab-pane")},m(e,o){u(e,n,o),d(n,i),d(i,r),d(r,l),d(r,s),d(r,a),d(r,c),d(r,f),k(f,t[6]),d(r,y),d(r,$),d(r,T),d(r,S),d(S,L),d(L,E),d(L,P),d(L,M),d(L,O),d(L,N),d(S,j),d(S,F),d(F,A),d(A,H),d(A,q);for(let e=0;e<9;e+=1)gt[e].m(A,null);d(F,D),d(F,I),d(I,B),d(S,z),d(S,V),d(V,W),d(V,R),d(V,J),d(V,G),d(V,Y),d(r,U),d(r,K),d(r,X),d(r,Q),d(r,Z),d(r,ee),d(ee,te),k(te,t[7]),d(ee,ne),d(ee,oe),d(r,ie),d(r,re),d(r,le),d(r,se),d(r,ae),d(r,ce),d(r,de),d(r,ue),d(r,he),d(r,pe),d(pe,fe),d(pe,me),d(pe,ge),k(ge,t[3]),d(pe,we),d(pe,ye),d(pe,ve),d(pe,be),k(be,t[4]),d(pe,xe),d(pe,_e),d(r,ke),d(r,Ce),d(r,$e),d(r,Te),d(r,Se),d(r,Le),d(r,Ee),d(r,Pe),d(Pe,Me),d(Me,Oe),d(Pe,Ne),d(Pe,je),d(je,Fe),d(r,Ae),d(r,He),d(r,qe),d(r,De),d(r,Ie),d(r,Be),d(r,ze),d(r,Ve),d(r,We),d(r,Re),d(r,Je),d(r,Ge),d(Ge,Ye),d(Ye,Ue),d(Ue,Ke),d(Ue,Xe),d(Ue,Qe),k(Qe,t[1]),d(Ye,Ze),d(Ye,et),d(et,tt),d(et,nt),d(et,ot),k(ot,t[2]),d(r,it),d(r,rt),d(r,lt),d(r,st),st.checked=t[0],d(r,at),d(r,ct),d(r,dt),d(r,ut),d(r,ht),pt||(ft=[v(f,"input",t[11]),v(E,"click",Wt),v(M,"click",t[8]),v(W,"click",Rt),v(J,"click",t[9]),v(te,"input",t[12]),v(se,"click",t[13]),v(ge,"input",t[14]),v(be,"input",t[15]),v(_e,"click",t[10]),v(Oe,"click",Ut.all),v(Fe,"click",Ut.docs),v(He,"click",Jt),v(De,"click",Gt),v(Be,"click",Yt),v(Qe,"input",t[16]),v(ot,"input",t[17]),v(st,"change",t[18]),v(ct,"click",t[19])],pt=!0)},p(e,t){64&t[0]&&f.value!==e[6]&&k(f,e[6]),32&t[0]&&_(B,e[5]),128&t[0]&&k(te,e[7]),8&t[0]&&ge.value!==e[3]&&k(ge,e[3]),16&t[0]&&be.value!==e[4]&&k(be,e[4]),2&t[0]&&x(Qe.value)!==e[1]&&k(Qe,e[1]),4&t[0]&&x(ot.value)!==e[2]&&k(ot,e[2]),1&t[0]&&(st.checked=e[0])},i:e,o:e,d(e){e&&h(n),p(gt,e),pt=!1,o(ft)}}}function en(e,t,n){let o,i,r,l,s,d,u,h,p,f,m,g,w,y,v,b;a(e,ae,(e=>n(20,i=e))),a(e,re,(e=>n(21,r=e))),a(e,ie,(e=>n(6,l=e))),a(e,$e,(e=>n(22,s=e))),a(e,Ce,(e=>n(23,d=e))),a(e,ke,(e=>n(24,u=e))),a(e,_e,(e=>n(25,h=e))),a(e,xe,(e=>n(26,p=e))),a(e,be,(e=>n(27,f=e))),a(e,he,(e=>n(28,m=e))),a(e,we,(e=>n(29,g=e))),a(e,Te,(e=>n(30,w=e))),a(e,ce,(e=>n(31,y=e))),a(e,se,(e=>n(7,v=e))),a(e,le,(e=>n(32,b=e)));const _=require("fs"),k=require("path");let C=!0,$=2,T=3,S="",L="";function E(e){if(e.Version<2)try{Kt[e.Version](e)}catch(t){window.alert(`\n                    The file you attempted to open was saved by an old version of Lexicanter (Version ~${e.Version}), \n                    which is no longer supported. Please contact the developer for assistance; the file is likely recoverable.\n                `)}else try{n(5,o="Loading settings..."),c(re,r=e.CaseSensitive,r),c(le,b=e.IgnoreDiacritics,b),c(se,v=e.HeaderTags,v),n(5,o="Loading alphabet..."),c(ce,y=e.Alphabet,y),n(5,o="Loading lexicon..."),c(ae,i=e.Lexicon,i),n(5,o="Loading phrasebook..."),c(he,m=e.Phrasebook,m),n(5,o="Loading documentation...");let t=e.Docs;w.destroy(),jt(t),c(we,g=Object.keys(m)[0],g),n(5,o="Loading romanizations..."),c(be,f=e.Romanization,f),Pe(),n(5,o="Loading phonotactics..."),c(xe,p=e.Phonotactics.Onsets.join(" "),p),c(_e,h=e.Phonotactics.Medials.join(" "),h),c(ke,u=e.Phonotactics.Codas.join(" "),u),c(Ce,d=e.Phonotactics.Vowels.join(" "),d),c($e,s=e.Phonotactics.Illegals.join(" "),s)}catch(e){window.alert("There was a problem loading the contents of the file. Please contact the developer for assistance."),console.log(e)}}return n(5,o=""),[C,$,T,S,L,o,l,v,async function(){let e,t=t=>{!async function(e,t){let n;await qt.invoke("showOpenDialog",e).then((e=>{n=e})),t(n)}({title:"Open Lexicon",defaultPath:`${t}${k.sep}Lexicons${k.sep}`,properties:["openFile"]},(t=>{if(void 0===t)return document.querySelectorAll(".planet").forEach((e=>{e.style.animationPlayState="paused"})),n(5,o="No file selected."),void window.setTimeout((()=>{n(5,o="")}),5e3);_.readFile(t[0],"utf8",((i,r)=>{if(i)return console.log(i),window.alert("There was an issue loading your file. Please contact the developer."),document.querySelectorAll(".planet").forEach((e=>{e.style.animationPlayState="paused"})),n(5,o="Couldn’t open file."),void window.setTimeout((()=>{n(5,o="")}),5e3);e=JSON.parse(r),E(e),c(ie,l=k.basename(t[0],".lexc"),l),document.querySelectorAll(".planet").forEach((e=>{e.style.animationPlayState="paused"})),n(5,o="Done!"),window.setTimeout((()=>{n(5,o="")}),5e3)}))}))};document.querySelectorAll(".planet").forEach((e=>{e.style.animationPlayState="running"})),n(5,o="Loading..."),await Bt((e=>{_.existsSync(`${e}${k.sep}Lexicons${k.sep}`)?t(e):_.mkdir(`${e}${k.sep}Lexicons${k.sep}`,(()=>{t(e)}))}))},async function(){document.querySelectorAll(".planet").forEach((e=>{e.style.animationPlayState="running"})),n(5,o="Loading...");let[e]=await window.showOpenFilePicker();await e.requestPermission({mode:"read"});let t=await e.getFile();if(!t.name.includes(".lexc"))return window.alert("The selected file was not a .lexc file."),document.querySelectorAll(".planet").forEach((e=>{e.style.animationPlayState="paused"})),n(5,o="Incorrect file type."),void window.setTimeout((()=>{n(5,o="")}),5e3);let i=await t.text();E(JSON.parse(i)),c(ie,l=t.name.split(".")[0],l),document.querySelectorAll(".planet").forEach((e=>{e.style.animationPlayState="paused"})),n(5,o="Done!"),window.setTimeout((()=>{n(5,o="")}),5e3)},function(){n(3,S=S.replace(/\^/g,"÷")),n(4,L=L.replace(/\^/g,"÷"));for(let e in i){let t="÷"+e+"÷";if(t.includes(r?S:S.toLowerCase())){let n=new RegExp(S,r?"g":"gi");t=t.replace(n,L),t=t.replace(/÷/gi,""),c(ae,t in i?i[t][1]=i[t][1]+"\n"+i[e][1]:i[t]=i[e],i),delete i[e]}}Pe(),ae.set(i),n(3,S=""),n(4,L="")},function(){l=this.value,ie.set(l)},function(){v=this.value,se.set(v)},()=>window.open("index.html","_blank","height=900, width=900"),function(){S=this.value,n(3,S)},function(){L=this.value,n(4,L)},function(){$=x(this.value),n(1,$)},function(){T=x(this.value),n(2,T)},function(){C=this.checked,n(0,C)},()=>async function(e,t,n){let[o]=await window.showOpenFilePicker();await o.requestPermission({mode:"read"});let i=await o.getFile();if(!i.name.includes(".csv"))return void window.alert("The selected file was not a .csv file.");let r=e,l=t-1,s=n-1,a=(await i.text()).split("\r"),c={};for(let e of a){if("on"===r&&e===a[0])continue;let t=e.split(",");t[0].includes('\n"')&&(t[0]=t[0].split('\n"')[1]),t[t.length-1]=t[t.length-1].replace(/"$/g,""),c[t[l]]=[get_pronunciation(t[l]),t[s],!1,[]]}ae.set(c),ie.set(i.name.split(".")[0])}(C,$,T)]}class tn extends te{constructor(e){super(),ee(this,e,en,Zt,r,{},null,[-1,-1])}}function nn(t){let n,i,r,l,s,a,c,p,f,g,y,x,_,k,T,S,L,E,P,M,O,N,j,F,A,q,D,I,B,z,V,W,R,J,G,Y,U,K,X,Q,Z,ee,te,ne,oe,ie,re,le,se,ae,ce,de,ue,he,pe,fe,me,ge,we,ye,ve,be,xe,_e,ke,Ce,$e,Te,Se,Le,Ee,Pe,Me;return{c(){n=m("div"),i=m("div"),r=m("div"),l=m("p"),l.textContent="Appearance Settings",s=w(),a=m("br"),c=w(),p=m("label"),p.textContent="Color Theme",f=w(),g=m("select"),y=m("optgroup"),x=m("option"),x.textContent="☾ Dark",_=m("option"),_.textContent="☀ Light",k=m("optgroup"),T=m("option"),T.textContent="☾ Marine",S=m("option"),S.textContent="☾ Glade",L=m("option"),L.textContent="☾ Pomegranate",E=m("option"),E.textContent="☀ Leatherbound",P=m("option"),P.textContent="☀ Wisteria",M=m("optgroup"),O=m("option"),O.textContent="☾ Purple Maar",N=m("option"),N.textContent="☾ Terminal",j=w(),F=m("br"),A=m("br"),q=w(),D=m("button"),D.textContent="Load Custom Theme…",I=w(),B=m("br"),z=m("br"),V=w(),W=m("p"),W.textContent="Saving Settings",R=w(),J=m("label"),J.textContent="Auto-Save",G=w(),Y=m("input"),U=w(),K=m("br"),X=m("br"),Q=w(),Z=m("p"),Z.innerHTML='Join the home of the Lexicanter project on <a rel="noreferrer" target="_blank" href="https://discord.gg/uDk2XDhh8K">Discord</a>',ee=w(),te=m("p"),te.innerHTML='Support the continued developement of the app as a <a rel="noreferrer" target="_blank" href="https://patreon.com/saturnine_softworks">patron</a>!',ne=w(),oe=m("br"),ie=m("br"),re=w(),le=m("p"),le.innerHTML="<u>New in 1.10</u>",se=w(),ae=m("p"),ae.innerHTML="• Added three new themes: Pomegranate, Wisteria, and Terminal. <br/>\n                • The word entry panel in the Lexicon tab is now collapsible. <br/>\n                • The Phrasebook now has active overwrite protection to prevent you from deleting your work by mistake. <br/>\n                • You can now search for an exact whole-word match in definitions and tags fields by using <code>!</code> as a prefix. <br/>\n                • For HTML exports, the appearance on mobile devices has been improved. <br/>\n                • Minor bug fixes for opening new windows from the File tab. <br/>\n                • Lots of uner-the-hood changes for the app&#39;s appearance in preparation for future features.\n                <br/><br/>",ce=w(),de=m("p"),de.innerHTML="<u>Patch 1.9.5</u>",ue=w(),he=m("p"),he.innerHTML="• Fixed a bug causing app-quit to be impossible sometimes. <br/>\n                • Fixed some minor bugs with the styles. <br/>\n                • Fixed a bug causing monospace toggle in the docs tab to be undoable. <br/>\n                • Fixed a bug causing external hyperlinks not to use the preferred browser, and is some cases not open at all.\n            <br/><br/>",pe=w(),fe=m("p"),fe.innerHTML="<u>Patch 1.9.4</u>",me=w(),ge=m("p"),ge.innerHTML="• You can now hyperlink to entries in the lexicon. The link format is <code>lex::word</code>. <br/>\n                • The documentation tab would previously not adjust to the width of the window. That has been fixed.\n            <br/><br/>",we=w(),ye=m("p"),ye.innerHTML="<u>New in 1.9</u>",ve=w(),be=m("p"),be.innerHTML='• Overhauled the Documentation tab, which now uses integrated <a href="https://editorjs.io/" target="_blank" rel="noreferrer">EditorJS</a> technology. <br/> Markdown is no longer supported in this tab, \n                    in favor of the new WYSIWYG style with a toolbar visible when you highlight text. <br/>\n                • Note: The first time you load a file from an older version, there may be some formatting quirks. \n                    Most of these should sort themselves out after saving in the new version and re-loading. \n                    Please contact the developer if you run into persistent issues. <br/>\n                • Fixed a bug with the Open New Window button which caused it to fail to open new windows. <br/>\n                • The button to edit phrasebook entries has been change to right-click instead of left-click to\n                    make it more difficult to accidentally overwrite work in progress, and to allow for\n                    highlighting text. <br/>\n                • An HTML Docs-Only export option has been added.\n            <br/><br/>',xe=w(),_e=m("p"),_e.innerHTML="<u>Patch 1.8.14</u>",ke=w(),Ce=m("p"),Ce.innerHTML="• Fixed a few minor bugs with markdown parsing.<br/>\n                • Added monospace markdown with <code>``this``</code> syntax.<br/>\n                • Fixed a reported bug which affected the orthography testing area.\n            <br/><br/> \n            ",$e=m("p"),$e.innerHTML="<u>New in 1.8</u>",Te=w(),Se=m("p"),Se.innerHTML='• File storage has been migrated to make auto-save possible. <br/>\n                • Categories can now be defined and used in your Pronunciations rules. See the <a target="_blank" href="https://lexicanter.com/docs" rel="noreferrer">docs page</a> for more info.<br/>\n                • Five new color themes: Light, Marine, Glade, Leatherbound, and Purple Maar (contributed by <a target="_blank" href="https://linktr.ee/maarzcreative" rel="noreferrer">Maarz</a>). <br/>\n                • You can now load in your own custom CSS color themes.<br/>\n                • Definitions, descriptions, and documentation sections now support simple <a target="_blank" href="https://lexicanter.com/docs#markdown" rel="noreferrer">markdown</a>. <br/>\n                • There&#39;s a new space in the Phonology tab to test your pronunciation rules. <br/>\n                • Tag searches no longer require an exact match. <br/>\n                • Several minor bug fixes, including one reported about tables being editable in the HTML\n                export.<br/>',Le=w(),Ee=m("br"),b(p,"for","theme-select"),x.__value="styles/dark.css",x.value=x.__value,_.__value="styles/light.css",_.value=_.__value,b(y,"label","Simple Themes"),T.__value="styles/marine.css",T.value=T.__value,S.__value="styles/glade.css",S.value=S.__value,L.__value="styles/pomegranate.css",L.value=L.__value,E.__value="styles/leatherbound.css",E.value=E.__value,P.__value="styles/wisteria.css",P.value=P.__value,b(k,"label","The Saturnine Collection"),O.__value="styles/purple_maar.css",O.value=O.__value,N.__value="styles/terminal_green.css",N.value=N.__value,b(M,"label","The Maarz Collection"),b(g,"name","theme-select"),b(g,"id","theme-select"),void 0===t[1]&&H((()=>t[5].call(g))),b(D,"class","hover-highlight hover-shadow"),b(J,"for","auto-save"),b(Y,"type","checkbox"),b(Y,"id","auto-save"),b(Z,"class","info"),b(te,"class","info"),C(ae,"width","70%"),C(ae,"margin","auto"),C(ae,"text-align","left"),C(ae,"line-height","1.6"),C(he,"width","70%"),C(he,"margin","auto"),C(he,"text-align","left"),C(he,"line-height","1.6"),C(ge,"width","70%"),C(ge,"margin","auto"),C(ge,"text-align","left"),C(ge,"line-height","1.6"),C(be,"width","70%"),C(be,"margin","auto"),C(be,"text-align","left"),C(be,"line-height","1.6"),C(Ce,"width","70%"),C(Ce,"margin","auto"),C(Ce,"text-align","left"),C(Ce,"line-height","1.6"),C(Se,"width","70%"),C(Se,"margin","auto"),C(Se,"text-align","left"),C(Se,"line-height","1.6"),b(r,"class","container column scrolled"),C(r,"height","90vh"),b(i,"class","row"),C(i,"height","95vh"),b(n,"class","tab-pane")},m(e,o){u(e,n,o),d(n,i),d(i,r),d(r,l),d(r,s),d(r,a),d(r,c),d(r,p),d(r,f),d(r,g),d(g,y),d(y,x),d(y,_),d(g,k),d(k,T),d(k,S),d(k,L),d(k,E),d(k,P),d(g,M),d(M,O),d(M,N),$(g,t[1]),d(r,j),d(r,F),d(r,A),d(r,q),d(r,D),d(r,I),d(r,B),d(r,z),d(r,V),d(r,W),d(r,R),d(r,J),d(r,G),d(r,Y),Y.checked=t[0],d(r,U),d(r,K),d(r,X),d(r,Q),d(r,Z),d(r,ee),d(r,te),d(r,ne),d(r,oe),d(r,ie),d(r,re),d(r,le),d(r,se),d(r,ae),d(r,ce),d(r,de),d(r,ue),d(r,he),d(r,pe),d(r,fe),d(r,me),d(r,ge),d(r,we),d(r,ye),d(r,ve),d(r,be),d(r,xe),d(r,_e),d(r,ke),d(r,Ce),d(r,$e),d(r,Te),d(r,Se),d(r,Le),d(r,Ee),Pe||(Me=[v(g,"change",t[5]),v(g,"change",t[2]),v(D,"click",t[3]),v(Y,"change",t[6]),v(Y,"change",t[4])],Pe=!0)},p(e,[t]){2&t&&$(g,e[1]),1&t&&(Y.checked=e[0])},i:e,o:e,d(e){e&&h(n),Pe=!1,o(Me)}}}function on(e,t,n){let o,i;a(e,Le,(e=>n(0,o=e))),a(e,Se,(e=>n(1,i=e)));const r=require("fs"),l=require("path");return Bt((e=>{r.existsSync(e+l.sep+"theme.txt")||r.writeFileSync(e+l.sep+"theme.txt","styles/dark.css");let t=r.readFileSync(e+l.sep+"theme.txt","utf8").toString();c(Se,i=t,i)})),Bt((e=>{r.existsSync(e+l.sep+"autosave_pref.txt")?c(Le,o="true"===r.readFileSync(e+l.sep+"autosave_pref.txt","utf8"),o):(r.writeFileSync(e+l.sep+"autosave_pref.txt","false"),c(Le,o=!0,o))})),[o,i,function(){Bt((e=>{r.writeFile(e+l.sep+"theme.txt",i,(e=>{e&&(window.alert("There was a problem loading your theme. Please contact the developer for assistance."),console.log(e))}))}))},async function(){let[e]=await window.showOpenFilePicker();await e.requestPermission({mode:"read"});let t=await e.getFile();if(!t.name.includes(".css"))return void window.alert("The selected file was not a .css file.");let n,o=await t.text();await Bt((e=>{let s=e+l.sep+"user_themes"+l.sep;r.existsSync(s)||r.mkdirSync(s),n=e+l.sep+"user_themes"+l.sep+t.name,r.writeFile(n,o,"utf8",(e=>{if(e)throw e;c(Se,i=n,i)})),r.writeFile(e+l.sep+"theme.txt",n,(e=>{if(e)throw e}))}))},function(){if(Bt((e=>{r.writeFile(e+l.sep+"autosave_pref.txt",String(o),"utf8",(e=>{if(e)throw e}))})),o)var e=window.setInterval(Wt,3e5,!1);else window.clearInterval(e)},function(){i=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),Se.set(i)},function(){o=this.checked,Le.set(o)}]}class rn extends te{constructor(e){super(),ee(this,e,on,nn,r,{})}}function ln(e,t,n){const o=e.slice();return o[7]=t[n],o[9]=n,o}function sn(e,t,n){const o=e.slice();return o[7]=t[n],o[9]=n,o}function an(e){let t,n,o,i,r=e[7]+"";function l(){return e[4](e[9])}return{c(){t=m("button"),n=g(r),b(t,"class","hover-highlight"),T(t,"selected",e[0]===e[9])},m(e,r){u(e,t,r),d(t,n),o||(i=v(t,"click",l),o=!0)},p(n,o){e=n,1&o&&T(t,"selected",e[0]===e[9])},d(e){e&&h(t),o=!1,i()}}}function cn(e){let t,n,o,i;var r=e[7];return r&&(n=S(r,{})),{c(){t=m("div"),n&&K(n.$$.fragment),o=w(),T(t,"collapsed",e[0]!==e[9])},m(e,r){u(e,t,r),n&&X(n,t,null),d(t,o),i=!0},p(e,l){if(r!==(r=e[7])){if(n){R();const e=n;Y(e.$$.fragment,1,0,(()=>{Q(e,1)})),J()}r?(n=S(r,{}),K(n.$$.fragment),G(n.$$.fragment,1),X(n,t,o)):n=null}(!i||1&l)&&T(t,"collapsed",e[0]!==e[9])},i(e){i||(n&&G(n.$$.fragment,e),i=!0)},o(e){n&&Y(n.$$.fragment,e),i=!1},d(e){e&&h(t),n&&Q(n)}}}function dn(e){let t,n,o,i,r,l,s,a,c,f=e[3],g=[];for(let t=0;t<f.length;t+=1)g[t]=an(sn(e,f,t));let y=e[2],v=[];for(let t=0;t<y.length;t+=1)v[t]=cn(ln(e,y,t));const x=e=>Y(v[e],1,1,(()=>{v[e]=null}));return{c(){t=m("link"),n=w(),o=m("body"),i=m("div"),r=m("div"),l=m("p"),l.innerHTML="<i>v</i>2.0.0",s=w();for(let e=0;e<g.length;e+=1)g[e].c();a=w();for(let e=0;e<v.length;e+=1)v[e].c();b(t,"rel","stylesheet"),b(t,"href",e[1]),b(l,"class","version-info"),b(r,"class","button-container"),b(i,"class","tab-container"),b(o,"id","body")},m(e,h){u(e,t,h),u(e,n,h),u(e,o,h),d(o,i),d(i,r),d(r,l),d(r,s);for(let e=0;e<g.length;e+=1)g[e].m(r,null);d(i,a);for(let e=0;e<v.length;e+=1)v[e].m(i,null);c=!0},p(e,[n]){if((!c||2&n)&&b(t,"href",e[1]),9&n){let t;for(f=e[3],t=0;t<f.length;t+=1){const o=sn(e,f,t);g[t]?g[t].p(o,n):(g[t]=an(o),g[t].c(),g[t].m(r,null))}for(;t<g.length;t+=1)g[t].d(1);g.length=f.length}if(5&n){let t;for(y=e[2],t=0;t<y.length;t+=1){const o=ln(e,y,t);v[t]?(v[t].p(o,n),G(v[t],1)):(v[t]=cn(o),v[t].c(),G(v[t],1),v[t].m(i,null))}for(R(),t=y.length;t<v.length;t+=1)x(t);J()}},i(e){if(!c){for(let e=0;e<y.length;e+=1)G(v[e]);c=!0}},o(e){v=v.filter(Boolean);for(let e=0;e<v.length;e+=1)Y(v[e]);c=!1},d(e){e&&h(t),e&&h(n),e&&h(o),p(g,e),p(v,e)}}}function un(e,t,n){let o,i,r;a(e,Le,(e=>n(5,i=e))),a(e,Se,(e=>n(1,r=e)));const{ipcRenderer:l}=require("electron"),s=[Ye,bt,St,Ht,tn,rn];l.on("app-close",(e=>{i?Wt().then((e=>{l.send("close")})):window.confirm("You may have unsaved changes. Are you sure you want to exit?")&&l.send("close")}));return n(0,o=0),[o,r,s,["Lexicon","Phrasebook","Phonology","Documentation","File","Settings"],e=>n(0,o=e)]}return new class extends te{constructor(e){super(),ee(this,e,un,dn,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
